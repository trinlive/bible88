<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏û‡∏£‡∏∞‡∏Ñ‡∏±‡∏°‡∏†‡∏µ‡∏£‡πå‡πÄ‡∏≠‡∏ò‡∏¥‡πÇ‡∏≠‡πÄ‡∏õ‡∏µ‡∏¢ (88 ‡πÄ‡∏•‡πà‡∏°) - Ethiopian Canon Reader</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.min.js"></script>
    <style>
        /* Import Sarabun Font */
        @import url('https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;500;600;700&display=swap');
        
        body {
            font-family: 'Sarabun', sans-serif;
            background-color: #f8fafc;
            color: #1e293b;
            transition: background-color 0.3s, color 0.3s;
        }
        
        .font-sarabun {
            font-family: 'Sarabun', sans-serif;
        }

        /* Themes */
        .theme-sepia {
            background-color: #f4ecd8;
            color: #5b4636;
        }
        .theme-sepia .bg-white { background-color: #fdf6e3; border-color: #e6dbbf; }
        .theme-sepia .text-slate-900 { color: #433422; }
        .theme-sepia .text-slate-600 { color: #5b4636; }
        .theme-sepia nav { background-color: #433422; }

        .theme-dark {
            background-color: #0f172a;
            color: #cbd5e1;
        }
        .theme-dark .bg-white { background-color: #1e293b; border-color: #334155; }
        .theme-dark .text-slate-900 { color: #f1f5f9; }
        .theme-dark .text-slate-600 { color: #94a3b8; }
        .theme-dark .text-slate-500 { color: #64748b; }
        .theme-dark nav { background-color: #020617; border-bottom: 1px solid #1e293b; }
        .theme-dark aside { background-color: #0f172a; border-right-color: #1e293b; }
        .theme-dark input, .theme-dark select { background-color: #1e293b; color: white; border-color: #334155; }
        .theme-dark .book-card:hover { background-color: #334155; }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: transparent; 
        }
        ::-webkit-scrollbar-thumb {
            background: #cbd5e1; 
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8; 
        }

        .book-card {
            transition: all 0.2s ease;
        }
        .book-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }

        .chapter-btn {
            transition: all 0.2s;
        }
        .chapter-btn:hover {
            transform: scale(1.05);
            border-color: #d97706;
            color: #d97706;
        }

        /* Loading Animation */
        .loading-shimmer {
            background: #f6f7f8;
            background-image: linear-gradient(to right, #f6f7f8 0%, #edeef1 20%, #f6f7f8 40%, #f6f7f8 100%);
            background-repeat: no-repeat;
            background-size: 800px 100%; 
            animation-duration: 1s;
            animation-fill-mode: forwards; 
            animation-iteration-count: infinite;
            animation-name: placeholderShimmer;
            animation-timing-function: linear;
        }
        .theme-dark .loading-shimmer {
            background: #1e293b;
            background-image: linear-gradient(to right, #1e293b 0%, #334155 20%, #1e293b 40%, #1e293b 100%);
        }

        @keyframes placeholderShimmer {
            0% { background-position: -468px 0; }
            100% { background-position: 468px 0; }
        }

        /* Verse Number Styling */
        .verse-num {
            color: #d97706; /* Amber 600 */
            font-weight: bold;
            font-size: 0.85em;
            margin-right: 0.5em;
            user-select: none;
            font-feature-settings: 'tnum';
            font-variant-numeric: tabular-nums;
        }

        /* Timeline Styles */
        .timeline-item {
            position: relative;
            padding-left: 24px;
            border-left: 2px solid #cbd5e1;
            padding-bottom: 32px;
        }
        .timeline-item:last-child {
            border-left: 2px solid transparent;
        }
        .timeline-dot {
            position: absolute;
            left: -6px;
            top: 0;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background-color: #d97706;
            border: 2px solid white;
            box-shadow: 0 0 0 2px #f1f5f9;
        }

        /* New Nav Button Style */
        .nav-back-btn {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 0.85rem;
            color: #94a3b8;
            background-color: rgba(30, 41, 59, 0.5);
            padding: 6px 12px;
            border-radius: 9999px;
            border: 1px solid rgba(71, 85, 105, 0.5);
            transition: all 0.2s;
            text-decoration: none;
            white-space: nowrap;
        }
        .nav-back-btn:hover {
            color: #fbbf24;
            border-color: #fbbf24;
            background-color: rgba(30, 41, 59, 1);
        }
    </style>
</head>
<body class="h-screen flex flex-col overflow-hidden text-sm md:text-base">

    <!-- Navbar -->
    <nav class="bg-slate-900 text-amber-400 px-4 md:px-6 py-3 md:py-4 flex items-center justify-between shadow-lg z-20 shrink-0">
        <!-- Left Side: Back Button + Title -->
        <div class="flex items-center gap-4">
            <!-- Back to Menu Button (Integrated into Navbar) -->
            <a href="/" class="nav-back-btn" title="‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏°‡∏ô‡∏π‡∏´‡∏•‡∏±‡∏Å">
                <i data-lucide="arrow-left" class="w-4 h-4"></i>
                <span class="hidden sm:inline">‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</span>
            </a>

            <!-- Separator Line -->
            <div class="h-6 w-px bg-slate-700 hidden sm:block"></div>

            <!-- App Title (Click to go Home within App) -->
            <div class="flex items-center gap-3 cursor-pointer" onclick="goHome()">
                <span class="text-2xl">üìú</span>
                <div>
                    <h1 class="font-bold text-lg md:text-xl tracking-wide font-sarabun">Ethiopian Canon 88</h1>
                    <p class="text-[10px] md:text-xs text-slate-400 font-sarabun hidden sm:block">‡∏™‡∏≤‡∏£‡∏ö‡∏ö‡∏û‡∏£‡∏∞‡∏Ñ‡∏±‡∏°‡∏†‡∏µ‡∏£‡πå‡πÄ‡∏≠‡∏ò‡∏¥‡πÇ‡∏≠‡πÄ‡∏õ‡∏µ‡∏¢ (‡∏â‡∏ö‡∏±‡∏ö‡∏ß‡∏¥‡∏ä‡∏≤‡∏Å‡∏≤‡∏£‡πÅ‡∏õ‡∏•‡πÑ‡∏ó‡∏¢ AI)</p>
                </div>
            </div>
        </div>

        <!-- Right Side: Actions -->
        <div class="flex items-center gap-2 md:gap-4 text-slate-300 font-sarabun">
            <!-- Lesson Creator Button -->
            <button onclick="goToLessonPlanner()" class="flex items-center gap-2 bg-amber-600 hover:bg-amber-700 px-3 py-1.5 md:px-4 md:py-2 rounded-full border border-amber-500 text-white font-medium text-xs md:text-sm transition-colors shadow-md">
                <i data-lucide="pen-tool" class="w-4 h-4"></i>
                <span class="hidden md:inline">‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</span>
            </button>

            <!-- Settings Button -->
            <div class="relative">
                <button onclick="toggleSettings()" class="p-2 hover:bg-white/10 rounded-full transition-colors" title="‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Å‡∏≤‡∏£‡∏≠‡πà‡∏≤‡∏ô">
                    <i data-lucide="type" class="w-5 h-5"></i>
                </button>
                <!-- Settings Dropdown -->
                <div id="settingsPanel" class="hidden absolute right-0 top-12 w-64 bg-white text-slate-800 rounded-xl shadow-xl border border-slate-200 p-4 z-50">
                    <h4 class="font-bold text-sm mb-3 border-b pb-2">‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•</h4>
                    <div class="mb-4">
                        <span class="text-xs text-slate-500 mb-1 block">‡∏Ç‡∏ô‡∏≤‡∏î‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£</span>
                        <div class="flex items-center justify-between bg-slate-100 rounded-lg p-1">
                            <button onclick="changeFontSize(-1)" class="p-2 hover:bg-white rounded w-1/3 flex justify-center"><i data-lucide="minus" class="w-4 h-4"></i></button>
                            <span id="fontSizeLabel" class="text-xs font-bold">100%</span>
                            <button onclick="changeFontSize(1)" class="p-2 hover:bg-white rounded w-1/3 flex justify-center"><i data-lucide="plus" class="w-4 h-4"></i></button>
                        </div>
                    </div>
                    <div>
                        <span class="text-xs text-slate-500 mb-1 block">‡∏ò‡∏µ‡∏°‡∏™‡∏µ</span>
                        <div class="flex gap-2">
                            <button onclick="setTheme('light')" class="w-1/3 h-10 rounded border border-slate-300 bg-white hover:ring-2 hover:ring-amber-500"></button>
                            <button onclick="setTheme('sepia')" class="w-1/3 h-10 rounded border border-amber-200 bg-[#f4ecd8] hover:ring-2 hover:ring-amber-500"></button>
                            <button onclick="setTheme('dark')" class="w-1/3 h-10 rounded border border-slate-600 bg-[#0f172a] hover:ring-2 hover:ring-amber-500"></button>
                        </div>
                    </div>
                </div>
            </div>

            <button onclick="toggleBookmarks()" class="p-2 hover:bg-white/10 rounded-full transition-colors relative" title="‡∏ó‡∏µ‡πà‡∏Ñ‡∏±‡πà‡∏ô‡∏´‡∏ô‡πâ‡∏≤">
                <i data-lucide="bookmark" class="w-5 h-5"></i>
                <span id="bookmarkBadge" class="hidden absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full"></span>
            </button>

            <!-- Topic Search Button -->
            <button onclick="goToTopicSearch()" class="hidden md:flex items-center gap-2 bg-slate-800 hover:bg-slate-700 px-4 py-2 rounded-full border border-slate-700 transition-colors text-amber-400 font-medium text-xs md:text-sm">
                <i data-lucide="search" class="w-4 h-4"></i>
                <span>‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠</span>
            </button>
        </div>
    </nav>

    <div class="flex flex-1 overflow-hidden relative">
        
        <!-- Sidebar: Book List -->
        <aside class="w-full md:w-80 bg-white border-r border-slate-200 flex flex-col shadow-md z-10 absolute md:relative h-full transition-transform transform md:translate-x-0 -translate-x-full" id="sidebar">
            <!-- Tabs -->
            <div class="flex border-b border-slate-200">
                <button onclick="switchSidebarTab('books')" id="tabBooks" class="flex-1 py-3 text-center text-sm font-bold border-b-2 border-amber-500 text-amber-600 bg-slate-50">‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠</button>
                <button onclick="switchSidebarTab('bookmarks')" id="tabBookmarks" class="flex-1 py-3 text-center text-sm font-bold text-slate-500 hover:text-slate-700">‡∏ó‡∏µ‡πà‡∏Ñ‡∏±‡πà‡∏ô‡∏´‡∏ô‡πâ‡∏≤</button>
            </div>

            <!-- Books View -->
            <div id="sidebarBooksView" class="flex flex-col h-full overflow-hidden">
                <div class="p-4 border-b border-slate-100 bg-slate-50">
                    <div class="relative">
                        <i data-lucide="filter" class="absolute left-3 top-2.5 text-slate-400 w-4 h-4"></i>
                        <input type="text" id="bookSearch" placeholder="‡∏Å‡∏£‡∏≠‡∏á‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠..." class="w-full pl-9 pr-4 py-2 rounded-lg border border-slate-200 focus:outline-none focus:border-amber-500 focus:ring-1 focus:ring-amber-500 text-sm font-sarabun bg-white text-slate-800">
                    </div>
                </div>
                <div class="flex-1 overflow-y-auto p-2" id="bookListContainer">
                    <!-- Javascript will populate this -->
                </div>
            </div>

            <!-- Bookmarks View -->
            <div id="sidebarBookmarksView" class="hidden flex-col h-full overflow-hidden bg-slate-50">
                <div class="p-4 text-center text-slate-500 text-xs italic border-b border-slate-100">
                    ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏ß‡πâ
                </div>
                <div id="bookmarksContainer" class="flex-1 overflow-y-auto p-2 space-y-2">
                    <!-- Bookmarks will go here -->
                    <div class="text-center p-8 text-slate-400">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ó‡∏µ‡πà‡∏Ñ‡∏±‡πà‡∏ô‡∏´‡∏ô‡πâ‡∏≤</div>
                </div>
            </div>
        </aside>

        <!-- Mobile Sidebar Toggle Overlay -->
        <div class="fixed inset-0 bg-black/50 z-0 md:hidden hidden" id="sidebarOverlay" onclick="toggleSidebar()"></div>

        <!-- Main Content: Reader -->
        <main class="flex-1 flex flex-col bg-slate-50 relative w-full h-full overflow-hidden" id="mainContentArea">
            
            <!-- Mobile Header for Sidebar Toggle -->
            <div class="md:hidden p-4 bg-white border-b flex justify-between items-center shadow-sm shrink-0">
                <button onclick="toggleSidebar()" class="text-slate-600 hover:text-slate-900">
                    <i data-lucide="menu" class="w-6 h-6"></i>
                </button>
                <span class="font-bold text-slate-800 font-sarabun" id="mobileHeaderTitle">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠</span>
                <button onclick="goToTopicSearch()" class="text-amber-600">
                    <i data-lucide="search" class="w-6 h-6"></i>
                </button>
            </div>

            <!-- Scrollable Content Area -->
            <div id="readerArea" class="flex-1 overflow-y-auto w-full transition-all duration-300">
                
                <!-- 1. Welcome Screen (Detailed Version) -->
                <div id="welcomeScreen" class="flex flex-col items-center min-h-full text-center text-slate-500 space-y-6 p-4 md:p-8">
                    <!-- Verse of the Day Card -->
                    <div id="verseOfDayCard" class="w-full max-w-2xl bg-gradient-to-r from-indigo-500 to-purple-600 rounded-xl p-1 shadow-lg transform hover:scale-[1.01] transition-transform mb-4 cursor-pointer" onclick="goToVerseOfDay()">
                        <div class="bg-white/95 rounded-lg p-6 h-full flex flex-col items-center justify-center text-center backdrop-blur-sm">
                            <span class="text-xs font-bold text-indigo-500 uppercase tracking-widest mb-2 flex items-center gap-1">
                                <i data-lucide="sun" class="w-3 h-3"></i> ‡∏û‡∏£‡∏∞‡∏ò‡∏£‡∏£‡∏°‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô
                            </span>
                            <p id="vodText" class="text-lg md:text-xl font-sarabun text-slate-800 font-semibold italic mb-3">
                                "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏û‡∏£‡∏∞‡∏ò‡∏£‡∏£‡∏°‡∏´‡∏ô‡∏∏‡∏ô‡πÉ‡∏à..."
                            </p>
                            <p id="vodRef" class="text-sm text-slate-500 font-bold">-</p>
                        </div>
                    </div>

                    <div class="max-w-6xl text-sm leading-relaxed space-y-6 text-slate-600 bg-white p-6 md:p-8 rounded-xl border border-slate-100 shadow-sm text-left font-sarabun w-full">
                        <div class="flex items-center gap-4 border-b border-slate-100 pb-4 mb-4">
                            <div class="w-12 h-12 bg-amber-100 rounded-full flex items-center justify-center text-2xl">‚õ™</div>
                            <div>
                                <h2 class="text-xl font-bold text-slate-900">‡∏´‡πâ‡∏≠‡∏á‡∏™‡∏°‡∏∏‡∏î‡πÄ‡∏≠‡∏ò‡∏¥‡πÇ‡∏≠‡πÄ‡∏õ‡∏µ‡∏¢</h2>
                                <p class="text-xs text-slate-500">‡∏Ñ‡∏•‡∏±‡∏á‡∏õ‡∏±‡∏ç‡∏ç‡∏≤‡πÇ‡∏ö‡∏£‡∏≤‡∏ì 88 ‡πÄ‡∏•‡πà‡∏°</p>
                            </div>
                        </div>
                        
                        <!-- Detailed Content -->
                        <div class="grid lg:grid-cols-2 gap-8">
                            <!-- Left Column: Detailed History -->
                            <div>
                                <h3 class="font-bold text-amber-700 mb-4 flex items-center gap-2 text-base border-b border-amber-100 pb-2">
                                    <i data-lucide="hourglass" class="w-5 h-5"></i> ‡πÑ‡∏ó‡∏°‡πå‡πÑ‡∏•‡∏ô‡πå‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡πÅ‡∏•‡∏∞‡∏£‡∏≤‡∏Å‡∏ê‡∏≤‡∏ô
                                </h3>
                                <div class="ml-2 border-l-2 border-slate-200 pl-6 space-y-5">
                                    
                                    <div class="timeline-item">
                                        <div class="timeline-dot"></div>
                                        <span class="text-[10px] font-bold text-amber-700 bg-amber-50 px-2 py-0.5 rounded-full border border-amber-100">~980 ‡∏õ‡∏µ‡∏Å‡πà‡∏≠‡∏ô ‡∏Ñ.‡∏®.</span>
                                        <h4 class="text-sm font-bold text-slate-800 mt-1">‡∏£‡∏≤‡∏ä‡∏¥‡∏ô‡∏µ‡πÅ‡∏´‡πà‡∏á‡πÄ‡∏ä‡∏ö‡∏≤ & ‡∏Å‡∏©‡∏±‡∏ï‡∏£‡∏¥‡∏¢‡πå‡πÇ‡∏ã‡πÇ‡∏•‡∏°‡∏≠‡∏ô</h4>
                                        <p class="text-xs text-slate-600 mt-1">
                                            ‡∏ï‡∏≥‡∏ô‡∏≤‡∏ô <em>Kebra Nagast</em> ‡∏£‡∏∞‡∏ö‡∏∏‡∏ß‡πà‡∏≤‡∏Å‡∏©‡∏±‡∏ï‡∏£‡∏¥‡∏¢‡πå‡πÄ‡∏°‡πÄ‡∏ô‡∏•‡∏¥‡∏Ñ‡∏ó‡∏µ‡πà 1 (‡πÇ‡∏≠‡∏£‡∏™) ‡πÑ‡∏î‡πâ‡∏≠‡∏±‡∏ç‡πÄ‡∏ä‡∏¥‡∏ç <strong>‡∏´‡∏µ‡∏ö‡∏û‡∏±‡∏ô‡∏ò‡∏™‡∏±‡∏ç‡∏ç‡∏≤</strong> ‡∏°‡∏≤‡∏õ‡∏£‡∏∞‡∏î‡∏¥‡∏©‡∏ê‡∏≤‡∏ô ‡∏ì ‡∏≠‡∏±‡∏Å‡∏ã‡∏∂‡∏° ‡πÄ‡∏õ‡πá‡∏ô‡∏à‡∏∏‡∏î‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏Ç‡∏≠‡∏á‡∏£‡∏≤‡∏Å‡∏ê‡∏≤‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏ö‡∏ö‡∏¢‡∏π‡∏î‡∏≤‡∏¢
                                        </p>
                                    </div>

                                    <div class="timeline-item">
                                        <div class="timeline-dot bg-indigo-500"></div>
                                        <span class="text-[10px] font-bold text-indigo-700 bg-indigo-50 px-2 py-0.5 rounded-full border border-indigo-100">‡∏Ñ.‡∏®. 42 (‡∏¢‡∏∏‡∏Ñ‡∏û‡∏±‡∏ô‡∏ò‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡πÉ‡∏´‡∏°‡πà)</span>
                                        <h4 class="text-sm font-bold text-slate-800 mt-1">‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å</h4>
                                        <p class="text-xs text-slate-600 mt-1">
                                            ‡∏Ç‡∏±‡∏ô‡∏ó‡∏µ‡∏ä‡∏≤‡∏ß‡πÄ‡∏≠‡∏ò‡∏¥‡πÇ‡∏≠‡πÄ‡∏õ‡∏µ‡∏¢‡∏£‡∏±‡∏ö‡∏ö‡∏±‡∏û‡∏ï‡∏¥‡∏®‡∏°‡∏≤‡∏à‡∏≤‡∏Å‡∏ü‡∏¥‡∏•‡∏¥‡∏õ (‡∏Å‡∏¥‡∏à‡∏Å‡∏≤‡∏£ 8) ‡∏ô‡∏≥‡∏Ç‡πà‡∏≤‡∏ß‡∏õ‡∏£‡∏∞‡πÄ‡∏™‡∏£‡∏¥‡∏ê‡∏Å‡∏•‡∏±‡∏ö‡∏™‡∏π‡πà‡∏°‡∏≤‡∏ï‡∏∏‡∏†‡∏π‡∏°‡∏¥ ‡πÅ‡∏™‡∏î‡∏á‡∏ñ‡∏∂‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö‡πÄ‡∏¢‡∏£‡∏π‡∏ã‡∏≤‡πÄ‡∏•‡πá‡∏°‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏ï‡πà‡∏¢‡∏∏‡∏Ñ‡πÅ‡∏£‡∏Å‡πÄ‡∏£‡∏¥‡πà‡∏°
                                        </p>
                                    </div>

                                    <div class="timeline-item">
                                        <div class="timeline-dot bg-indigo-500"></div>
                                        <span class="text-[10px] font-bold text-indigo-700 bg-indigo-50 px-2 py-0.5 rounded-full border border-indigo-100">‡∏Ñ.‡∏®. 330</span>
                                        <h4 class="text-sm font-bold text-slate-800 mt-1">‡∏®‡∏≤‡∏™‡∏ô‡∏≤‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ä‡∏≤‡∏ï‡∏¥</h4>
                                        <p class="text-xs text-slate-600 mt-1">
                                            <strong>‡∏Å‡∏©‡∏±‡∏ï‡∏£‡∏¥‡∏¢‡πå‡πÄ‡∏≠‡∏ã‡∏≤‡∏ô‡∏≤</strong> ‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏£‡∏±‡∏ö‡∏®‡∏≤‡∏™‡∏ô‡∏≤‡∏Ñ‡∏£‡∏¥‡∏™‡∏ï‡πå‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£ ‡πÇ‡∏î‡∏¢‡∏°‡∏µ <strong>‡∏ô‡∏±‡∏Å‡∏ö‡∏∏‡∏ç‡∏ü‡∏£‡∏π‡πÄ‡∏°‡∏ô‡∏ï‡∏¥‡∏≠‡∏∏‡∏™</strong> ‡πÄ‡∏õ‡πá‡∏ô‡∏ö‡∏¥‡∏î‡∏≤‡πÅ‡∏´‡πà‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏ä‡∏∑‡πà‡∏≠ (Abba Salama)
                                        </p>
                                    </div>

                                    <div class="timeline-item">
                                        <div class="timeline-dot bg-emerald-500"></div>
                                        <span class="text-[10px] font-bold text-emerald-700 bg-emerald-50 px-2 py-0.5 rounded-full border border-emerald-100">‡∏Ñ.‡∏®. 480</span>
                                        <h4 class="text-sm font-bold text-slate-800 mt-1">‡πÄ‡∏Å‡πâ‡∏≤‡∏ô‡∏±‡∏Å‡∏ö‡∏∏‡∏ç (The Nine Saints)</h4>
                                        <p class="text-xs text-slate-600 mt-1">
                                            ‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ô‡∏±‡∏Å‡∏û‡∏£‡∏ï‡∏•‡∏µ‡πâ‡∏†‡∏±‡∏¢‡∏°‡∏≤‡πÅ‡∏õ‡∏•‡∏û‡∏£‡∏∞‡∏Ñ‡∏±‡∏°‡∏†‡∏µ‡∏£‡πå‡πÄ‡∏õ‡πá‡∏ô‡∏†‡∏≤‡∏©‡∏≤ <strong>‡∏Å‡∏µ‡πÄ‡∏≠‡∏ã (Ge'ez)</strong> ‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏ï‡πâ‡∏ô‡∏â‡∏ö‡∏±‡∏ö‡∏ó‡∏µ‡πà‡∏™‡∏π‡∏ç‡∏´‡∏≤‡∏¢‡πÑ‡∏õ‡∏à‡∏≤‡∏Å‡πÇ‡∏•‡∏Å‡∏ï‡∏∞‡∏ß‡∏±‡∏ô‡∏ï‡∏Å ‡πÄ‡∏ä‡πà‡∏ô ‡πÄ‡∏≠‡πÇ‡∏ô‡∏Ñ ‡πÅ‡∏•‡∏∞ ‡∏¢‡∏π‡∏ö‡∏¥‡∏•‡∏µ
                                        </p>
                                    </div>

                                    <div class="timeline-item">
                                        <div class="timeline-dot bg-emerald-500"></div>
                                        <span class="text-[10px] font-bold text-emerald-700 bg-emerald-50 px-2 py-0.5 rounded-full border border-emerald-100">‡∏Ñ.‡∏®. 540</span>
                                        <h4 class="text-sm font-bold text-slate-800 mt-1">‡∏Å‡∏≥‡πÄ‡∏ô‡∏¥‡∏î‡∏î‡∏ô‡∏ï‡∏£‡∏µ‡∏®‡∏±‡∏Å‡∏î‡∏¥‡πå‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå (Yared)</h4>
                                        <p class="text-xs text-slate-600 mt-1">
                                            <strong>‡∏ô‡∏±‡∏Å‡∏ö‡∏∏‡∏ç‡∏¢‡∏≤‡πÄ‡∏£‡∏î</strong> ‡∏õ‡∏£‡∏∞‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏ö‡∏ó‡πÄ‡∏û‡∏•‡∏á‡∏™‡∏ß‡∏î (Zema) ‡πÅ‡∏•‡∏∞‡∏£‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ö‡∏û‡∏¥‡∏ò‡∏µ‡∏Å‡∏£‡∏£‡∏° ‡∏ã‡∏∂‡πà‡∏á‡∏¢‡∏±‡∏á‡∏Ñ‡∏á‡πÉ‡∏ä‡πâ‡∏Ç‡∏±‡∏ö‡∏£‡πâ‡∏≠‡∏á‡πÉ‡∏ô‡πÇ‡∏ö‡∏™‡∏ñ‡πå‡πÄ‡∏≠‡∏ò‡∏¥‡πÇ‡∏≠‡πÄ‡∏õ‡∏µ‡∏¢‡∏°‡∏≤‡∏à‡∏ô‡∏ñ‡∏∂‡∏á‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô
                                        </p>
                                    </div>

                                    <div class="timeline-item">
                                        <div class="timeline-dot bg-slate-400"></div>
                                        <span class="text-[10px] font-bold text-slate-600 bg-slate-100 px-2 py-0.5 rounded-full border border-slate-200">‡∏®‡∏ï‡∏ß‡∏£‡∏£‡∏©‡∏ó‡∏µ‡πà 12</span>
                                        <h4 class="text-sm font-bold text-slate-800 mt-1">‡πÄ‡∏¢‡∏£‡∏π‡∏ã‡∏≤‡πÄ‡∏•‡πá‡∏°‡πÉ‡∏´‡∏°‡πà (Lalibela)</h4>
                                        <p class="text-xs text-slate-600 mt-1">
                                            ‡∏Å‡∏©‡∏±‡∏ï‡∏£‡∏¥‡∏¢‡πå‡∏•‡∏≤‡∏•‡∏¥‡πÄ‡∏ö‡∏•‡∏≤‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏°‡∏´‡∏≤‡∏ß‡∏¥‡∏´‡∏≤‡∏£‡∏®‡∏¥‡∏•‡∏≤ 11 ‡πÅ‡∏´‡πà‡∏á‡πÉ‡∏ï‡πâ‡∏î‡∏¥‡∏ô ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏à‡∏≥‡∏•‡∏≠‡∏á‡πÄ‡∏¢‡∏£‡∏π‡∏ã‡∏≤‡πÄ‡∏•‡πá‡∏°‡πÉ‡∏´‡∏°‡πà ‡∏™‡∏∞‡∏ó‡πâ‡∏≠‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏ó‡∏µ‡πà‡∏ù‡∏±‡∏á‡∏£‡∏≤‡∏Å‡∏•‡∏∂‡∏Å
                                        </p>
                                    </div>

                                    <div class="timeline-item border-none pb-0">
                                        <div class="timeline-dot bg-slate-400"></div>
                                        <span class="text-[10px] font-bold text-slate-600 bg-slate-100 px-2 py-0.5 rounded-full border border-slate-200">‡∏®‡∏ï‡∏ß‡∏£‡∏£‡∏©‡∏ó‡∏µ‡πà 14 (‡∏¢‡∏∏‡∏Ñ‡∏ó‡∏≠‡∏á)</span>
                                        <h4 class="text-sm font-bold text-slate-800 mt-1">‡∏Å‡∏≤‡∏£‡∏ü‡∏∑‡πâ‡∏ô‡∏ü‡∏π‡∏ß‡∏£‡∏£‡∏ì‡∏Å‡∏£‡∏£‡∏°</h4>
                                        <p class="text-xs text-slate-600 mt-1">
                                            ‡∏¢‡∏∏‡∏Ñ‡πÅ‡∏´‡πà‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÅ‡∏•‡∏∞‡∏£‡∏ß‡∏ö‡∏£‡∏ß‡∏°‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç ‡πÄ‡∏ä‡πà‡∏ô <em>Kebra Nagast</em> ‡πÅ‡∏•‡∏∞ <em>Fetha Nagast</em>
                                        </p>
                                    </div>

                                </div>
                            </div>

                            <!-- Right Column: Canon & Archaeology -->
                            <div class="space-y-6">
                                <!-- Canon Structure -->
                                <div class="bg-slate-50 p-4 rounded-lg border border-indigo-100">
                                    <h3 class="font-bold text-indigo-700 mb-3 flex items-center gap-2 text-base">
                                        <i data-lucide="library" class="w-5 h-5"></i> ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏™‡∏≤‡∏£‡∏ö‡∏ö (81-88 ‡πÄ‡∏•‡πà‡∏°)
                                    </h3>
                                    <div class="text-xs space-y-3 text-slate-700">
                                        <div>
                                            <strong class="text-indigo-900 block mb-1">‡∏û‡∏±‡∏ô‡∏ò‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡πÄ‡∏î‡∏¥‡∏° (46 ‡∏´‡∏£‡∏∑‡∏≠ 53 ‡πÄ‡∏•‡πà‡∏°):</strong>
                                            <p class="leading-relaxed mb-1">‡∏ô‡∏≠‡∏Å‡∏à‡∏≤‡∏Å 39 ‡πÄ‡∏•‡πà‡∏°‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô ‡∏¢‡∏±‡∏á‡∏£‡∏ß‡∏°‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç:</p>
                                            <ul class="list-disc ml-4 text-slate-600 space-y-0.5">
                                                <li><em>Enoch (‡πÄ‡∏≠‡πÇ‡∏ô‡∏Ñ)</em>: ‡∏Ñ‡∏≥‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡∏ì‡πå‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ö‡∏∏‡∏ï‡∏£‡∏°‡∏ô‡∏∏‡∏©‡∏¢‡πå‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏û‡∏¥‡∏û‡∏≤‡∏Å‡∏©‡∏≤</li>
                                                <li><em>Jubilees (‡∏¢‡∏π‡∏ö‡∏¥‡∏•‡∏µ)</em>: ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏•‡∏Å‡πÅ‡∏•‡∏∞‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡∏õ‡∏¥‡∏ï‡∏≤‡∏à‡∏≤‡∏£‡∏¢‡πå</li>
                                                <li><em>Meqabyan 1-3</em>: ‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡∏°‡∏±‡∏Ñ‡∏Ñ‡∏≤‡∏ö‡∏µ‡∏â‡∏ö‡∏±‡∏ö‡πÄ‡∏≠‡∏ò‡∏¥‡πÇ‡∏≠‡πÄ‡∏õ‡∏µ‡∏¢</li>
                                                <li><em>Tobit, Judith, Wisdom, Sirach, Baruch</em></li>
                                            </ul>
                                        </div>
                                        <div>
                                            <strong class="text-indigo-900 block mb-1">‡∏û‡∏±‡∏ô‡∏ò‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡πÉ‡∏´‡∏°‡πà (35 ‡πÄ‡∏•‡πà‡∏°):</strong>
                                            <p class="leading-relaxed mb-1">‡∏ô‡∏≠‡∏Å‡∏à‡∏≤‡∏Å 27 ‡πÄ‡∏•‡πà‡∏°‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô ‡πÄ‡∏û‡∏¥‡πà‡∏° "‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡∏£‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ö‡∏ß‡∏¥‡∏ô‡∏±‡∏¢" 8 ‡πÄ‡∏•‡πà‡∏°:</p>
                                            <ul class="list-disc ml-4 text-slate-600 space-y-0.5">
                                                <li><em>Sirate Tsion</em> (‡∏£‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ö‡πÅ‡∏´‡πà‡∏á‡∏®‡∏¥‡πÇ‡∏¢‡∏ô)</li>
                                                <li><em>Tizaz</em> (‡∏û‡∏£‡∏∞‡∏ö‡∏±‡∏ç‡∏ä‡∏≤), <em>Gitsiw</em>, <em>Abtilis</em></li>
                                                <li><em>Metsihafe Kidan I & II</em> (‡∏û‡∏±‡∏ô‡∏ò‡∏™‡∏±‡∏ç‡∏ç‡∏≤)</li>
                                                <li><em>Epistles of Clement</em> & <em>Didascalia</em></li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>

                                <!-- Archaeology -->
                                <div class="bg-white p-4 rounded-lg border border-emerald-200 shadow-sm">
                                    <h3 class="font-bold text-emerald-700 mb-3 flex items-center gap-2 text-base">
                                        <i data-lucide="pickaxe" class="w-5 h-5"></i> ‡πÑ‡∏Æ‡πÑ‡∏•‡∏ó‡πå‡∏ó‡∏≤‡∏á‡πÇ‡∏ö‡∏£‡∏≤‡∏ì‡∏Ñ‡∏î‡∏µ
                                    </h3>
                                    <ul class="text-xs space-y-3 text-slate-700">
                                        <li class="flex gap-2 items-start">
                                            <span class="text-lg leading-none">üìú</span>
                                            <div>
                                                <strong class="text-emerald-900 block">Garima Gospels (‡∏Ñ.‡∏®. 330-650)</strong>
                                                ‡∏û‡∏£‡∏∞‡∏Å‡∏¥‡∏ï‡∏ï‡∏¥‡∏Ñ‡∏∏‡∏ì‡∏õ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏†‡∏≤‡∏û‡∏™‡∏µ‡∏ó‡∏µ‡πà <em>‡πÄ‡∏Å‡πà‡∏≤‡πÅ‡∏Å‡πà‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡πÉ‡∏ô‡πÇ‡∏•‡∏Å</em> ‡∏ó‡∏µ‡πà‡∏¢‡∏±‡∏á‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå ‡∏Ñ‡πâ‡∏ô‡∏û‡∏ö‡∏ó‡∏µ‡πà‡∏≠‡∏≤‡∏£‡∏≤‡∏° Abba Garima ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏≠‡∏≤‡∏¢‡∏∏‡∏î‡πâ‡∏ß‡∏¢ Carbon-14
                                            </div>
                                        </li>
                                        <li class="flex gap-2 items-start">
                                            <span class="text-lg leading-none">üè∫</span>
                                            <div>
                                                <strong class="text-emerald-900 block">Dead Sea Scrolls Connection</strong>
                                                ‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏û‡∏ö‡∏ä‡∏¥‡πâ‡∏ô‡∏™‡πà‡∏ß‡∏ô <em>1 Enoch</em> ‡πÅ‡∏•‡∏∞ <em>Jubilees</em> ‡∏ó‡∏µ‡πà‡∏ñ‡πâ‡∏≥‡∏Ñ‡∏∏‡∏°‡∏£‡∏≤‡∏ô ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ß‡πà‡∏≤‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡πÄ‡∏´‡∏•‡πà‡∏≤‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏≤‡∏Å‡∏ê‡∏≤‡∏ô‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏Ç‡∏≠‡∏á‡∏ä‡∏≤‡∏ß‡∏¢‡∏¥‡∏ß‡πÇ‡∏ö‡∏£‡∏≤‡∏ì ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏ó‡∏µ‡πà‡πÄ‡∏≠‡∏ò‡∏¥‡πÇ‡∏≠‡πÄ‡∏õ‡∏µ‡∏¢‡∏£‡∏±‡∏Å‡∏©‡∏≤‡πÑ‡∏ß‡πâ
                                            </div>
                                        </li>
                                        <li class="flex gap-2 items-start">
                                            <span class="text-lg leading-none">üóùÔ∏è</span>
                                            <div>
                                                <strong class="text-emerald-900 block">Ark of the Covenant</strong>
                                                ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏ß‡πà‡∏≤‡∏´‡∏µ‡∏ö‡∏û‡∏±‡∏ô‡∏ò‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ñ‡∏π‡∏Å‡πÄ‡∏Å‡πá‡∏ö‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏Ç‡πâ‡∏°‡∏á‡∏ß‡∏î‡∏†‡∏≤‡∏¢‡πÉ‡∏ô <em>Chapel of the Tablet</em> ‡∏ì ‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏≠‡∏±‡∏Å‡∏ã‡∏∂‡∏° ‡πÇ‡∏î‡∏¢‡∏°‡∏µ "‡∏û‡∏£‡∏∞‡∏†‡∏¥‡∏Å‡∏©‡∏∏‡∏ú‡∏π‡πâ‡∏û‡∏¥‡∏ó‡∏±‡∏Å‡∏©‡πå" ‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏£‡∏π‡∏õ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡πÉ‡∏´‡πâ‡πÄ‡∏ù‡πâ‡∏≤‡∏î‡∏π‡πÅ‡∏•‡πÅ‡∏•‡∏∞‡πÄ‡∏´‡πá‡∏ô‡∏´‡∏µ‡∏ö‡∏ô‡∏±‡πâ‡∏ô‡∏ï‡∏•‡∏≠‡∏î‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï
                                            </div>
                                        </li>
                                        <li class="flex gap-2 items-start">
                                            <span class="text-lg leading-none">üèõÔ∏è</span>
                                            <div>
                                                <strong class="text-emerald-900 block">Yeha Temple (700 ‡∏õ‡∏µ‡∏Å‡πà‡∏≠‡∏ô ‡∏Ñ.‡∏®.)</strong>
                                                ‡∏ß‡∏¥‡∏´‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡πà‡∏≤‡πÅ‡∏Å‡πà‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡πÉ‡∏ô‡πÄ‡∏≠‡∏ò‡∏¥‡πÇ‡∏≠‡πÄ‡∏õ‡∏µ‡∏¢ ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏î‡πâ‡∏ß‡∏¢‡∏´‡∏¥‡∏ô‡∏ï‡∏±‡∏î‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏Å‡∏£‡∏¥‡∏ö‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ‡∏õ‡∏π‡∏ô ‡πÅ‡∏™‡∏î‡∏á‡∏ñ‡∏∂‡∏á‡∏≠‡∏≤‡∏£‡∏¢‡∏ò‡∏£‡∏£‡∏°‡∏ä‡∏±‡πâ‡∏ô‡∏™‡∏π‡∏á‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏Å‡∏±‡∏ö‡∏≠‡∏≤‡∏ì‡∏≤‡∏à‡∏±‡∏Å‡∏£‡∏ã‡∏≤‡∏ö‡∏≤ (Sabaean)
                                            </div>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <!-- New Canon History Section (Restored as requested) -->
                        <div class="canon-info mt-8 pt-8 border-t border-slate-200">
                            <h4 class="text-amber-600 font-bold mb-4 text-center text-base border-b-2 border-amber-200 pb-1 inline-block px-6">
                                üìú ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡∏Å‡∏≤‡∏£‡∏à‡∏≤‡∏£‡∏∂‡∏Å‡∏û‡∏£‡∏∞‡∏Ñ‡∏±‡∏°‡∏†‡∏µ‡∏£‡πå‡πÄ‡∏≠‡∏ò‡∏¥‡πÇ‡∏≠‡πÄ‡∏õ‡∏µ‡∏¢
                            </h4>
                            
                            <div class="grid md:grid-cols-3 gap-6 text-left mt-2">
                                <div class="bg-amber-50/50 p-4 rounded-lg border border-amber-100">
                                    <h5 class="font-bold text-amber-800 mb-2 text-sm flex items-center gap-2">
                                        <i data-lucide="feather" class="w-4 h-4"></i> ‡∏¢‡∏∏‡∏Ñ‡∏ó‡∏≠‡∏á‡πÅ‡∏´‡πà‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏õ‡∏•
                                    </h5>
                                    <p class="text-xs text-slate-600 leading-relaxed">
                                        ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÉ‡∏ô‡∏®‡∏ï‡∏ß‡∏£‡∏£‡∏©‡∏ó‡∏µ‡πà 5 ‡πÇ‡∏î‡∏¢‡∏Å‡∏•‡∏∏‡πà‡∏° <strong>"‡πÄ‡∏Å‡πâ‡∏≤‡∏ô‡∏±‡∏Å‡∏ö‡∏∏‡∏ç" (The Nine Saints)</strong> ‡∏ó‡∏µ‡πà‡∏•‡∏µ‡πâ‡∏†‡∏±‡∏¢‡∏ó‡∏≤‡∏á‡∏®‡∏≤‡∏™‡∏ô‡∏≤‡∏°‡∏≤‡∏à‡∏≤‡∏Å‡∏ã‡∏µ‡πÄ‡∏£‡∏µ‡∏¢‡πÅ‡∏•‡∏∞‡∏Å‡∏£‡∏µ‡∏Å ‡πÑ‡∏î‡πâ‡πÅ‡∏õ‡∏•‡∏û‡∏£‡∏∞‡∏Ñ‡∏±‡∏°‡∏†‡∏µ‡∏£‡πå‡∏à‡∏≤‡∏Å‡∏†‡∏≤‡∏©‡∏≤‡∏Æ‡∏µ‡∏ö‡∏£‡∏π/‡∏Å‡∏£‡∏µ‡∏Å/‡∏≠‡∏£‡∏≤‡πÄ‡∏°‡∏≠‡∏¥‡∏Å ‡πÄ‡∏õ‡πá‡∏ô‡∏†‡∏≤‡∏©‡∏≤ <strong>‡∏Å‡∏µ‡πÄ‡∏≠‡∏ã (Ge'ez)</strong> ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏û‡∏£‡∏∞‡∏ò‡∏£‡∏£‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡∏à‡∏¥‡∏ï‡∏ß‡∏¥‡∏ç‡∏ç‡∏≤‡∏ì‡∏Ç‡∏≠‡∏á‡∏ä‡∏≤‡∏ß‡∏û‡∏∑‡πâ‡∏ô‡πÄ‡∏°‡∏∑‡∏≠‡∏á
                                    </p>
                                </div>

                                <div class="bg-indigo-50/50 p-4 rounded-lg border border-indigo-100">
                                    <h5 class="font-bold text-indigo-800 mb-2 text-sm flex items-center gap-2">
                                        <i data-lucide="shield" class="w-4 h-4"></i> ‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏ï‡πâ‡∏ô‡∏â‡∏ö‡∏±‡∏ö
                                    </h5>
                                    <p class="text-xs text-slate-600 leading-relaxed">
                                        ‡πÉ‡∏ô‡∏Ç‡∏ì‡∏∞‡∏ó‡∏µ‡πà‡πÇ‡∏•‡∏Å‡∏ï‡∏∞‡∏ß‡∏±‡∏ô‡∏ï‡∏Å‡∏ï‡∏±‡∏î‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡∏ö‡∏≤‡∏á‡πÄ‡∏•‡πà‡∏°‡∏≠‡∏≠‡∏Å ‡πÄ‡∏≠‡∏ò‡∏¥‡πÇ‡∏≠‡πÄ‡∏õ‡∏µ‡∏¢‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≠‡∏á‡πÄ‡∏´‡πá‡∏ô‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡πà‡∏≤‡πÅ‡∏•‡∏∞‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡∏≠‡∏¢‡πà‡∏≤‡∏á <em>Enoch</em> ‡πÅ‡∏•‡∏∞ <em>Jubilees</em> ‡πÑ‡∏ß‡πâ‡πÉ‡∏ô‡∏ê‡∏≤‡∏ô‡∏∞‡∏û‡∏£‡∏∞‡∏ß‡∏à‡∏ô‡∏∞‡∏®‡∏±‡∏Å‡∏î‡∏¥‡πå‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏´‡∏•‡πà‡∏á‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡πÉ‡∏ô‡πÇ‡∏•‡∏Å‡∏ó‡∏µ‡πà‡∏°‡∏µ‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå
                                    </p>
                                </div>

                                <div class="bg-emerald-50/50 p-4 rounded-lg border border-emerald-100">
                                    <h5 class="font-bold text-emerald-800 mb-2 text-sm flex items-center gap-2">
                                        <i data-lucide="scroll" class="w-4 h-4"></i> ‡∏®‡∏¥‡∏•‡∏õ‡∏∞‡∏Å‡∏≤‡∏£‡∏à‡∏≤‡∏£‡∏∂‡∏Å
                                    </h5>
                                    <p class="text-xs text-slate-600 leading-relaxed">
                                        ‡∏û‡∏£‡∏∞‡∏Ñ‡∏±‡∏°‡∏†‡∏µ‡∏£‡πå‡∏ó‡∏∏‡∏Å‡πÄ‡∏•‡πà‡∏°‡∏ñ‡∏π‡∏Å‡∏à‡∏≤‡∏£‡∏∂‡∏Å‡∏î‡πâ‡∏ß‡∏¢‡∏°‡∏∑‡∏≠‡∏ö‡∏ô <strong>‡∏´‡∏ô‡∏±‡∏á‡πÅ‡∏û‡∏∞ (Vellum)</strong> ‡πÅ‡∏•‡∏∞‡∏ï‡∏Å‡πÅ‡∏ï‡πà‡∏á‡∏î‡πâ‡∏ß‡∏¢‡∏†‡∏≤‡∏û‡∏ß‡∏≤‡∏î‡∏™‡∏µ‡∏ò‡∏£‡∏£‡∏°‡∏ä‡∏≤‡∏ï‡∏¥‡∏ó‡∏µ‡πà‡∏™‡∏î‡πÉ‡∏™ (Illuminated Manuscripts) ‡πÇ‡∏î‡∏¢‡∏û‡∏£‡∏∞‡∏†‡∏¥‡∏Å‡∏©‡∏∏‡πÉ‡∏ô‡∏≠‡∏≤‡∏£‡∏≤‡∏°‡∏ö‡∏ô‡∏¢‡∏≠‡∏î‡πÄ‡∏Ç‡∏≤ ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏Ñ‡∏±‡∏°‡∏†‡∏µ‡∏£‡πå‡∏°‡∏µ‡∏≠‡∏≤‡∏¢‡∏∏‡∏¢‡∏∑‡∏ô‡∏¢‡∏≤‡∏ß‡∏ô‡∏±‡∏ö‡∏û‡∏±‡∏ô‡∏õ‡∏µ
                                    </p>
                                </div>
                            </div>
                            
                            <p class="mt-6 text-center italic text-slate-400 text-[10px]">
                                "‡∏™‡∏≤‡∏£‡∏ö‡∏ö 81-88 ‡πÄ‡∏•‡πà‡∏° ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç ‡πÅ‡∏ï‡πà‡∏Ñ‡∏∑‡∏≠‡∏°‡∏£‡∏î‡∏Å‡πÅ‡∏´‡πà‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡∏ï‡πà‡∏≠‡∏ú‡πà‡∏≤‡∏ô‡∏Å‡∏≤‡∏•‡πÄ‡∏ß‡∏•‡∏≤‡∏Å‡∏ß‡πà‡∏≤ 1,600 ‡∏õ‡∏µ"
                            </p>
                        </div>

                        <div class="flex flex-col sm:flex-row gap-3 justify-center mt-6 pt-4 border-t border-slate-100 w-full">
                            <button onclick="goToTopicSearch()" class="bg-indigo-600 text-white px-6 py-3 rounded-full shadow-lg hover:bg-indigo-700 transition-colors font-bold flex items-center gap-2 justify-center">
                                <i data-lucide="search" class="w-5 h-5"></i> ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ï‡∏≤‡∏°‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠
                            </button>
                            <button onclick="toggleSidebar()" class="md:hidden bg-slate-800 text-white px-6 py-3 rounded-full shadow-lg hover:bg-slate-700 transition-colors font-bold flex items-center gap-2 justify-center">
                                <i data-lucide="book-open" class="w-5 h-5"></i> ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡∏≠‡πà‡∏≤‡∏ô
                            </button>
                        </div>
                    </div>
                </div>

                <!-- 2. Chapter Selection Grid -->
                <div id="chapterSelectionView" class="hidden max-w-5xl mx-auto p-4 md:p-10">
                    <div class="mb-8">
                        <div class="text-amber-600 text-sm font-semibold mb-2 uppercase tracking-wider font-sarabun" id="gridBookCategory">‡∏´‡∏°‡∏ß‡∏î</div>
                        <h1 class="text-3xl md:text-4xl font-bold text-slate-900 font-sarabun mb-2" id="gridBookTitle">‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠</h1>
                        <p class="text-slate-500 font-sarabun">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ö‡∏ó‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏≠‡πà‡∏≤‡∏ô:</p>
                    </div>
                    <div class="grid grid-cols-4 sm:grid-cols-6 md:grid-cols-8 lg:grid-cols-10 gap-3" id="chapterGrid"></div>
                </div>

                <!-- 3. Reading View -->
                <div id="readingView" class="hidden max-w-7xl mx-auto p-4 md:p-8">
                    <!-- Header Section -->
                    <div class="mb-8 border-b pb-4 border-slate-200">
                        <div class="flex flex-wrap items-center justify-between gap-4">
                            <div>
                                <button onclick="backToChapters()" class="text-xs text-slate-500 hover:text-amber-600 flex items-center gap-1 mb-1 transition-colors font-sarabun">
                                    <i data-lucide="arrow-left" class="w-3 h-3"></i> ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏£‡∏ß‡∏°‡∏ö‡∏ó
                                </button>
                                <h1 class="text-2xl md:text-3xl font-bold text-slate-900 font-sarabun flex items-center gap-2" id="bookTitleDisplay">
                                    ‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠
                                </h1>
                                <div class="text-xs text-amber-600 font-bold uppercase tracking-wider mt-1 font-sarabun" id="bookCategoryLabel">‡∏´‡∏°‡∏ß‡∏î</div>
                            </div>
                            <!-- Controls -->
                            <div class="flex items-center gap-3">
                                <button onclick="saveBookmark()" id="saveBookmarkBtn" class="p-2 rounded-full hover:bg-slate-100 text-slate-400 hover:text-amber-500 transition-colors" title="‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ó‡∏µ‡πà‡∏Ñ‡∏±‡πà‡∏ô‡∏´‡∏ô‡πâ‡∏≤">
                                    <i data-lucide="bookmark" class="w-6 h-6"></i>
                                </button>
                                <div class="flex items-center gap-2 bg-white p-1.5 rounded-lg border border-slate-200 shadow-sm">
                                    <button onclick="changeChapter(-1)" class="p-1.5 hover:bg-slate-100 rounded-md disabled:opacity-30" id="prevChapBtn"><i data-lucide="chevron-left" class="w-5 h-5"></i></button>
                                    <span class="font-bold min-w-[60px] text-center text-slate-700 text-sm">‡∏ö‡∏ó‡∏ó‡∏µ‡πà <span id="currentChapterNum">1</span></span>
                                    <button onclick="changeChapter(1)" class="p-1.5 hover:bg-slate-100 rounded-md" id="nextChapBtn"><i data-lucide="chevron-right" class="w-5 h-5"></i></button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Split Layout -->
                    <div class="flex flex-col lg:flex-row gap-8 items-start">
                        <div class="w-full lg:w-2/3 bg-white p-6 md:p-10 rounded-xl shadow-sm border border-slate-100 text-area-container">
                            <div id="textContent" class="prose prose-lg prose-slate max-w-none font-sarabun leading-loose text-slate-700"></div>
                        </div>
                        <div class="w-full lg:w-1/3 lg:sticky lg:top-4">
                            <div class="bg-indigo-50/50 border border-indigo-100 rounded-xl p-6 shadow-sm">
                                <div class="flex items-center gap-2 mb-4 text-indigo-800 font-bold border-b border-indigo-200 pb-2 font-sarabun">
                                    <i data-lucide="graduation-cap" class="w-5 h-5"></i>
                                    <span>‡∏ö‡∏ó‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÄ‡∏ä‡∏¥‡∏á‡∏ß‡∏¥‡∏ä‡∏≤‡∏Å‡∏≤‡∏£</span>
                                </div>
                                <div id="summaryContent" class="text-sm text-slate-600 space-y-4 leading-relaxed font-sarabun"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 4. Topic Search View -->
                <div id="topicSearchView" class="hidden max-w-4xl mx-auto p-4 md:p-10 min-h-full">
                    <div class="text-center mb-8">
                        <h2 class="text-3xl font-bold text-slate-800 font-sarabun mb-2">‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏û‡∏£‡∏∞‡∏ò‡∏£‡∏£‡∏°‡∏ï‡∏≤‡∏°‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠</h2>
                        <p class="text-slate-500 font-sarabun">‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏Ç‡πâ‡∏≠‡∏û‡∏£‡∏∞‡∏Ñ‡∏±‡∏°‡∏†‡∏µ‡∏£‡πå‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á‡∏à‡∏≤‡∏Å‡∏™‡∏≤‡∏£‡∏ö‡∏ö 88 ‡πÄ‡∏•‡πà‡∏°</p>
                    </div>
                    <div class="max-w-2xl mx-auto mb-8 relative">
                        <input type="text" id="topicInput" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏ß‡∏±‡∏á, ‡∏Å‡∏≤‡∏£‡∏ó‡∏£‡∏á‡∏ô‡∏≥..." class="w-full pl-6 pr-14 py-4 rounded-full border-2 border-slate-200 focus:border-amber-500 focus:ring-4 focus:ring-amber-100 text-lg shadow-sm font-sarabun transition-all outline-none" onkeypress="if(event.key === 'Enter') performTopicSearch()">
                        <button onclick="performTopicSearch()" class="absolute right-2 top-2 bottom-2 bg-amber-500 hover:bg-amber-600 text-white p-3 rounded-full transition-colors shadow-md">
                            <i data-lucide="search" class="w-5 h-5"></i>
                        </button>
                    </div>
                    <div id="searchResults" class="space-y-4">
                        <div class="text-center text-slate-400 py-10 font-sarabun italic hidden" id="searchPlaceholder">‡∏û‡∏¥‡∏°‡∏û‡πå‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ ‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡πÅ‡∏ß‡πà‡∏ô‡∏Ç‡∏¢‡∏≤‡∏¢</div>
                    </div>
                </div>

                <!-- 5. Lesson Planner View -->
                <div id="lessonPlannerView" class="hidden max-w-6xl mx-auto p-4 md:p-8 min-h-full">
                    <div class="text-center mb-6">
                        <h2 class="text-3xl font-bold text-slate-800 font-sarabun mb-1">‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏™‡∏≠‡∏ô (Lesson Studio)</h2>
                        <p class="text-slate-500 font-sarabun text-sm">‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏≠‡∏ô‡πÅ‡∏•‡∏∞‡∏Ñ‡∏≠‡∏ô‡πÄ‡∏ó‡∏ô‡∏ï‡πå‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå‡∏à‡∏≤‡∏Å‡∏û‡∏£‡∏∞‡∏Ñ‡∏±‡∏°‡∏†‡∏µ‡∏£‡πå‡πÄ‡∏≠‡∏ò‡∏¥‡πÇ‡∏≠‡πÄ‡∏õ‡∏µ‡∏¢</p>
                    </div>

                    <div class="grid lg:grid-cols-3 gap-6">
                        <!-- Left: Input & Saved Lessons -->
                        <div class="space-y-6">
                            <!-- Creator Box -->
                            <div class="bg-white p-5 rounded-xl shadow-sm border border-amber-100">
                                <h3 class="font-bold text-amber-800 mb-3 flex items-center gap-2">
                                    <i data-lucide="pen-tool" class="w-4 h-4"></i> ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÉ‡∏´‡∏°‡πà
                                </h3>
                                <div class="space-y-3">
                                    <div>
                                        <label class="block text-xs font-bold text-slate-500 mb-1">‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏™‡∏≠‡∏ô</label>
                                        <input type="text" id="lessonTopic" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏Ñ‡∏π‡πà, ‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡∏•‡∏π‡∏Å, ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏ß‡∏±‡∏á..." class="w-full p-3 rounded-lg border border-slate-200 focus:ring-2 focus:ring-amber-500 text-sm outline-none font-sarabun">
                                    </div>
                                    <div class="grid grid-cols-2 gap-2">
                                        <div>
                                            <label class="block text-xs font-bold text-slate-500 mb-1">‡πÅ‡∏û‡∏•‡∏ï‡∏ü‡∏≠‡∏£‡πå‡∏°</label>
                                            <select id="lessonPlatform" class="w-full p-3 rounded-lg border border-slate-200 text-sm outline-none font-sarabun bg-white">
                                                <option value="General">‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ (General)</option>
                                                <option value="TikTok">TikTok/Reels</option>
                                                <option value="Facebook">Facebook</option>
                                                <option value="Youtube">Youtube</option>
                                            </select>
                                        </div>
                                        <div>
                                            <label class="block text-xs font-bold text-slate-500 mb-1">‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤</label>
                                            <select id="lessonDuration" class="w-full p-3 rounded-lg border border-slate-200 text-sm outline-none font-sarabun bg-white">
                                                <option value="3-5 minutes">3-5 ‡∏ô‡∏≤‡∏ó‡∏µ</option>
                                                <option value="15 minutes">15 ‡∏ô‡∏≤‡∏ó‡∏µ</option>
                                                <option value="30 minutes">30 ‡∏ô‡∏≤‡∏ó‡∏µ</option>
                                            </select>
                                        </div>
                                    </div>
                                    <button onclick="generateLesson()" id="genLessonBtn" class="w-full bg-amber-600 hover:bg-amber-700 text-white py-3 rounded-lg font-bold shadow-md transition-all flex justify-center gap-2">
                                        <i data-lucide="sparkles" class="w-5 h-5"></i> ‡πÉ‡∏´‡πâ AI ‡∏£‡πà‡∏≤‡∏á‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô
                                    </button>
                                </div>
                            </div>

                            <!-- Saved List -->
                            <div class="bg-white p-5 rounded-xl shadow-sm border border-slate-200 h-[400px] flex flex-col">
                                <h3 class="font-bold text-slate-700 mb-3 flex items-center gap-2 border-b pb-2">
                                    <i data-lucide="archive" class="w-4 h-4"></i> ‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏ß‡πâ
                                </h3>
                                <div id="savedLessonsList" class="flex-1 overflow-y-auto space-y-2 pr-1">
                                    <!-- Items populated by JS -->
                                    <div class="text-center text-slate-400 text-xs mt-10">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</div>
                                </div>
                            </div>
                        </div>

                        <!-- Right: Lesson Output -->
                        <div class="lg:col-span-2">
                            <div class="bg-white rounded-xl shadow-lg border border-slate-200 h-full min-h-[500px] flex flex-col relative overflow-hidden">
                                <!-- Toolbar -->
                                <div class="bg-slate-50 px-4 py-3 border-b border-slate-200 flex justify-between items-center">
                                    <span class="font-bold text-slate-700 text-sm" id="lessonPreviewTitle">‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</span>
                                    <div class="flex gap-2">
                                        <button onclick="copyLesson()" class="p-2 hover:bg-white rounded text-slate-500 hover:text-indigo-600" title="‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å"><i data-lucide="copy" class="w-4 h-4"></i></button>
                                        <button onclick="saveCurrentLesson()" id="saveLessonBtn" class="p-2 hover:bg-white rounded text-slate-500 hover:text-emerald-600" title="‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å" disabled><i data-lucide="save" class="w-4 h-4"></i></button>
                                        <button onclick="clearLessonView()" class="p-2 hover:bg-white rounded text-slate-500 hover:text-red-600" title="‡∏•‡πâ‡∏≤‡∏á"><i data-lucide="trash-2" class="w-4 h-4"></i></button>
                                    </div>
                                </div>
                                
                                <!-- Content -->
                                <div id="lessonContentArea" class="p-6 md:p-8 overflow-y-auto flex-1 prose prose-slate max-w-none font-sarabun">
                                    <div class="flex flex-col items-center justify-center h-full text-slate-300">
                                        <i data-lucide="layout-template" class="w-16 h-16 mb-4 opacity-50"></i>
                                        <p>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏î‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </main>
    </div>

    <!-- Script -->
    <script>
        // *** API Calls go to Node.js Proxy ***
        
        // PROXY FUNCTION
        async function callGeminiProxy(prompt) {
            const response = await fetch('https://bible.iam7.co.th/api/get-verses', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ prompt: prompt })
            });
            const data = await response.json();
            if (data.error) throw new Error(data.error);
            return data;
        }

        // Data (Ethiopian Biblical Canon)
        const ethiopianCanon = [
            { category: "‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡∏ò‡∏£‡∏£‡∏°‡∏ö‡∏±‡∏ç‡∏ç‡∏±‡∏ï‡∏¥ (Orit)", books: [ { en: "Genesis", th: "‡∏õ‡∏ê‡∏°‡∏Å‡∏≤‡∏•", ch: 50 }, { en: "Exodus", th: "‡∏≠‡∏û‡∏¢‡∏û", ch: 40 }, { en: "Leviticus", th: "‡πÄ‡∏•‡∏ß‡∏µ‡∏ô‡∏¥‡∏ï‡∏¥", ch: 27 }, { en: "Numbers", th: "‡∏Å‡∏±‡∏ô‡∏î‡∏≤‡∏£‡∏ß‡∏¥‡∏ñ‡∏µ", ch: 36 }, { en: "Deuteronomy", th: "‡πÄ‡∏â‡∏•‡∏¢‡∏ò‡∏£‡∏£‡∏°‡∏ö‡∏±‡∏ç‡∏ç‡∏±‡∏ï‡∏¥", ch: 34 } ] },
            { category: "‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡πÅ‡∏•‡∏∞‡∏û‡∏±‡∏ô‡∏ò‡∏™‡∏±‡∏ç‡∏ç‡∏≤", books: [ { en: "Joshua", th: "‡πÇ‡∏¢‡∏ä‡∏π‡∏ß‡∏≤", ch: 24 }, { en: "Judges", th: "‡∏ú‡∏π‡πâ‡∏ß‡∏¥‡∏ô‡∏¥‡∏à‡∏â‡∏±‡∏¢", ch: 21 }, { en: "Ruth", th: "‡∏ô‡∏≤‡∏á‡∏£‡∏π‡∏ò", ch: 4 }, { en: "1 Samuel", th: "1 ‡∏ã‡∏≤‡∏°‡∏π‡πÄ‡∏≠‡∏•", ch: 31 }, { en: "2 Samuel", th: "2 ‡∏ã‡∏≤‡∏°‡∏π‡πÄ‡∏≠‡∏•", ch: 24 }, { en: "1 Kings", th: "1 ‡∏û‡∏á‡∏®‡πå‡∏Å‡∏©‡∏±‡∏ï‡∏£‡∏¥‡∏¢‡πå", ch: 22 }, { en: "2 Kings", th: "2 ‡∏û‡∏á‡∏®‡πå‡∏Å‡∏©‡∏±‡∏ï‡∏£‡∏¥‡∏¢‡πå", ch: 25 }, { en: "1 Chronicles", th: "1 ‡∏û‡∏á‡∏®‡∏≤‡∏ß‡∏î‡∏≤‡∏£", ch: 29 }, { en: "2 Chronicles", th: "2 ‡∏û‡∏á‡∏®‡∏≤‡∏ß‡∏î‡∏≤‡∏£", ch: 36 }, { en: "Ezra", th: "‡πÄ‡∏≠‡∏™‡∏£‡∏≤", ch: 10 }, { en: "Nehemiah", th: "‡πÄ‡∏ô‡∏´‡∏∞‡∏°‡∏µ‡∏¢‡πå", ch: 13 }, { en: "Tobit", th: "‡πÇ‡∏ó‡∏ö‡∏¥‡∏ï", ch: 14, tag: "Deuterocanon" }, { en: "Judith", th: "‡∏¢‡∏π‡∏î‡∏¥‡∏ò", ch: 16, tag: "Deuterocanon" }, { en: "Esther", th: "‡πÄ‡∏≠‡∏™‡πÄ‡∏ò‡∏≠‡∏£‡πå", ch: 10 }, { en: "1 Maccabees", th: "1 ‡∏°‡∏±‡∏Ñ‡∏Ñ‡∏≤‡∏ö‡∏µ", ch: 16, tag: "Deuterocanon" }, { en: "2 Maccabees", th: "2 ‡∏°‡∏±‡∏Ñ‡∏Ñ‡∏≤‡∏ö‡∏µ", ch: 15, tag: "Deuterocanon" }, { en: "Jubilees", th: "‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡∏¢‡∏π‡∏ö‡∏¥‡∏•‡∏µ", ch: 50, tag: "Ethiopian Only" }, { en: "Enoch", th: "‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡πÄ‡∏≠‡πÇ‡∏ô‡∏Ñ", ch: 108, tag: "Ethiopian Only" } ] },
            { category: "‡∏õ‡∏£‡∏µ‡∏ä‡∏≤‡∏ç‡∏≤‡∏ì‡πÅ‡∏•‡∏∞‡∏ö‡∏ó‡πÄ‡∏û‡∏•‡∏á", books: [ { en: "Job", th: "‡πÇ‡∏¢‡∏ö", ch: 42 }, { en: "Psalms", th: "‡∏™‡∏î‡∏∏‡∏î‡∏µ", ch: 150 }, { en: "Proverbs", th: "‡∏™‡∏∏‡∏†‡∏≤‡∏©‡∏¥‡∏ï", ch: 31 }, { en: "Tegstsats", th: "‡∏Ñ‡∏≥‡∏ï‡∏±‡∏Å‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô", ch: 1, tag: "Ethiopian Only" }, { en: "Wisdom of Solomon", th: "‡∏õ‡∏£‡∏µ‡∏ä‡∏≤‡∏ç‡∏≤‡∏ì‡πÇ‡∏ã‡πÇ‡∏•‡∏°‡∏≠‡∏ô", ch: 19, tag: "Deuterocanon" }, { en: "Ecclesiastes", th: "‡∏õ‡∏±‡∏ç‡∏ç‡∏≤‡∏à‡∏≤‡∏£‡∏¢‡πå", ch: 12 }, { en: "Song of Solomon", th: "‡πÄ‡∏û‡∏•‡∏á‡∏ã‡∏≤‡πÇ‡∏•‡∏°‡∏≠‡∏ô", ch: 8 }, { en: "Sirach", th: "‡∏ö‡∏∏‡∏ï‡∏£‡∏™‡∏¥‡∏£‡∏≤", ch: 51, tag: "Deuterocanon" } ] },
            { category: "‡∏ú‡∏π‡πâ‡πÄ‡∏ú‡∏¢‡∏û‡∏£‡∏∞‡∏ß‡∏à‡∏ô‡∏∞", books: [ { en: "Isaiah", th: "‡∏≠‡∏¥‡∏™‡∏¢‡∏≤‡∏´‡πå", ch: 66 }, { en: "Jeremiah", th: "‡πÄ‡∏¢‡πÄ‡∏£‡∏°‡∏µ‡∏¢‡πå", ch: 52 }, { en: "Lamentations", th: "‡πÄ‡∏û‡∏•‡∏á‡∏Ñ‡∏£‡πà‡∏≥‡∏Ñ‡∏£‡∏ß‡∏ç", ch: 5 }, { en: "Ezekiel", th: "‡πÄ‡∏≠‡πÄ‡∏™‡πÄ‡∏Ñ‡∏µ‡∏¢‡∏•", ch: 48 }, { en: "Daniel", th: "‡∏î‡∏≤‡πÄ‡∏ô‡∏µ‡∏¢‡∏•", ch: 12 }, { en: "Hosea", th: "‡πÇ‡∏Æ‡πÄ‡∏ä‡∏¢‡∏≤", ch: 14 }, { en: "Joel", th: "‡πÇ‡∏¢‡πÄ‡∏≠‡∏•", ch: 3 }, { en: "Amos", th: "‡∏≠‡∏≤‡πÇ‡∏°‡∏™", ch: 9 }, { en: "Obadiah", th: "‡πÇ‡∏≠‡∏ö‡∏≤‡∏î‡∏µ‡∏´‡πå", ch: 1 }, { en: "Jonah", th: "‡πÇ‡∏¢‡∏ô‡∏≤‡∏´‡πå", ch: 4 }, { en: "Micah", th: "‡∏°‡∏µ‡∏Ñ‡∏≤‡∏´‡πå", ch: 7 }, { en: "Nahum", th: "‡∏ô‡∏≤‡∏Æ‡∏π‡∏°", ch: 3 }, { en: "Habakkuk", th: "‡∏Æ‡∏≤‡∏ö‡∏≤‡∏Å‡∏∏‡∏Å", ch: 3 }, { en: "Zephaniah", th: "‡πÄ‡∏®‡∏ü‡∏±‡∏ô‡∏¢‡∏≤‡∏´‡πå", ch: 3 }, { en: "Haggai", th: "‡∏Æ‡∏±‡∏Å‡∏Å‡∏±‡∏¢", ch: 2 }, { en: "Zechariah", th: "‡πÄ‡∏®‡∏Ñ‡∏≤‡∏£‡∏¥‡∏¢‡∏≤‡∏´‡πå", ch: 14 }, { en: "Malachi", th: "‡∏°‡∏≤‡∏•‡∏≤‡∏Ñ‡∏µ", ch: 4 }, { en: "Baruch", th: "‡∏ö‡∏≤‡∏£‡∏∏‡∏Ñ", ch: 5, tag: "Deuterocanon" }, { en: "4 Baruch", th: "4 ‡∏ö‡∏≤‡∏£‡∏∏‡∏Ñ", ch: 9, tag: "Ethiopian Only" } ] },
            { category: "‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡∏û‡∏¥‡πÄ‡∏®‡∏©", books: [ { en: "1 Meqabyan", th: "1 ‡πÄ‡∏°‡∏Ñ‡∏≤‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô", ch: 36, tag: "Ethiopian Only" }, { en: "2 Meqabyan", th: "2 ‡πÄ‡∏°‡∏Ñ‡∏≤‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô", ch: 23, tag: "Ethiopian Only" }, { en: "3 Meqabyan", th: "3 ‡πÄ‡∏°‡∏Ñ‡∏≤‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô", ch: 10, tag: "Ethiopian Only" } ] },
            { category: "‡∏û‡∏±‡∏ô‡∏ò‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡πÉ‡∏´‡∏°‡πà", books: [ { en: "Matthew", th: "‡∏°‡∏±‡∏ó‡∏ò‡∏¥‡∏ß", ch: 28 }, { en: "Mark", th: "‡∏°‡∏≤‡∏£‡∏∞‡πÇ‡∏Å", ch: 16 }, { en: "Luke", th: "‡∏•‡∏π‡∏Å‡∏≤", ch: 24 }, { en: "John", th: "‡∏¢‡∏≠‡∏´‡πå‡∏ô", ch: 21 }, { en: "Acts", th: "‡∏Å‡∏¥‡∏à‡∏Å‡∏≤‡∏£", ch: 28 }, { en: "Romans", th: "‡πÇ‡∏£‡∏°", ch: 16 }, { en: "1 Corinthians", th: "1 ‡πÇ‡∏Ñ‡∏£‡∏¥‡∏ô‡∏ò‡πå", ch: 16 }, { en: "2 Corinthians", th: "2 ‡πÇ‡∏Ñ‡∏£‡∏¥‡∏ô‡∏ò‡πå", ch: 13 }, { en: "Galatians", th: "‡∏Å‡∏≤‡∏•‡∏≤‡πÄ‡∏ó‡∏µ‡∏¢", ch: 6 }, { en: "Ephesians", th: "‡πÄ‡∏≠‡πÄ‡∏ü‡∏ã‡∏±‡∏™", ch: 6 }, { en: "Philippians", th: "‡∏ü‡∏¥‡∏•‡∏¥‡∏õ‡∏õ‡∏µ", ch: 4 }, { en: "Colossians", th: "‡πÇ‡∏Ñ‡πÇ‡∏•‡∏™‡∏µ", ch: 4 }, { en: "1 Thessalonians", th: "1 ‡πÄ‡∏ò‡∏™‡∏∞‡πÇ‡∏•‡∏ô‡∏¥‡∏Å‡∏≤", ch: 5 }, { en: "2 Thessalonians", th: "2 ‡πÄ‡∏ò‡∏™‡∏∞‡πÇ‡∏•‡∏ô‡∏¥‡∏Å‡∏≤", ch: 3 }, { en: "1 Timothy", th: "1 ‡∏ó‡∏¥‡πÇ‡∏°‡∏ò‡∏µ", ch: 6 }, { en: "2 Timothy", th: "2 ‡∏ó‡∏¥‡πÇ‡∏°‡∏ò‡∏µ", ch: 4 }, { en: "Titus", th: "‡∏ó‡∏¥‡∏ï‡∏±‡∏™", ch: 3 }, { en: "Philemon", th: "‡∏ü‡∏µ‡πÄ‡∏•‡πÇ‡∏°‡∏ô", ch: 1 }, { en: "Hebrews", th: "‡∏Æ‡∏µ‡∏ö‡∏£‡∏π", ch: 13 }, { en: "James", th: "‡∏¢‡∏≤‡∏Å‡∏≠‡∏ö", ch: 5 }, { en: "1 Peter", th: "1 ‡πÄ‡∏õ‡πÇ‡∏ï‡∏£", ch: 5 }, { en: "2 Peter", th: "2 ‡πÄ‡∏õ‡πÇ‡∏ï‡∏£", ch: 3 }, { en: "1 John", th: "1 ‡∏¢‡∏≠‡∏´‡πå‡∏ô", ch: 5 }, { en: "2 John", th: "2 ‡∏¢‡∏≠‡∏´‡πå‡∏ô", ch: 1 }, { en: "3 John", th: "3 ‡∏¢‡∏≠‡∏´‡πå‡∏ô", ch: 1 }, { en: "Jude", th: "‡∏¢‡∏π‡∏î‡∏≤", ch: 1 }, { en: "Revelation", th: "‡∏ß‡∏¥‡∏ß‡∏£‡∏ì‡πå", ch: 22 } ] },
            { category: "‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡∏£‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ö‡∏ß‡∏¥‡∏ô‡∏±‡∏¢", books: [ { en: "Sirate Tsion", th: "‡∏£‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ö‡πÅ‡∏´‡πà‡∏á‡∏®‡∏¥‡πÇ‡∏¢‡∏ô", ch: 1, tag: "Ethiopian Only" }, { en: "Tizaz", th: "‡∏û‡∏£‡∏∞‡∏ö‡∏±‡∏ç‡∏ä‡∏≤", ch: 1, tag: "Ethiopian Only" }, { en: "Gitsiw", th: "‡∏Å‡∏¥‡∏ï‡∏ã‡∏¥‡∏ß", ch: 1, tag: "Ethiopian Only" }, { en: "Abtilis", th: "‡∏≠‡∏±‡∏ö‡∏ï‡∏¥‡∏•‡∏¥‡∏™", ch: 1, tag: "Ethiopian Only" }, { en: "1 Book of the Covenant", th: "‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡∏û‡∏±‡∏ô‡∏ò‡∏™‡∏±‡∏ç‡∏ç‡∏≤ I", ch: 60, tag: "Ethiopian Only" }, { en: "2 Book of the Covenant", th: "‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡∏û‡∏±‡∏ô‡∏ò‡∏™‡∏±‡∏ç‡∏ç‡∏≤ II", ch: 1, tag: "Ethiopian Only" }, { en: "Epistles of Clement", th: "‡∏à‡∏î‡∏´‡∏°‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á‡πÄ‡∏Ñ‡∏•‡πÄ‡∏°‡∏ô‡∏ï‡πå", ch: 1, tag: "Ethiopian Only" }, { en: "Didascalia", th: "‡∏î‡∏¥‡∏î‡∏≤‡∏™‡∏Ñ‡∏≤‡πÄ‡∏•‡∏µ‡∏¢", ch: 43, tag: "Ethiopian Only" } ] }
        ];

        const contentCache = { translation: {}, summary: {} };
        let currentBook = null;
        let currentChapter = 1;
        let fontSize = 100;
        let bookmarks = JSON.parse(localStorage.getItem('ethiopian_bookmarks')) || [];
        let savedLessons = JSON.parse(localStorage.getItem('ethiopian_lessons')) || [];
        let currentGeneratedLesson = null;

        // Cache Helper functions
        function getCachedContent(type, book, ch) {
            return localStorage.getItem(`eth_${type}_${book}_${ch}`);
        }
        function saveCachedContent(type, book, ch, data) {
            try { localStorage.setItem(`eth_${type}_${book}_${ch}`, data); } catch(e) { console.log('Cache full'); }
        }

        document.addEventListener('DOMContentLoaded', () => {
            renderSidebar();
            if (typeof lucide !== 'undefined') lucide.createIcons();
            document.getElementById('searchPlaceholder').classList.remove('hidden');
            loadVerseOfDay();
            updateBookmarksList();
            updateSavedLessonsList();
        });

        // --- Lesson Planner Logic ---
        function goToLessonPlanner() {
            hideAllViews();
            document.getElementById('lessonPlannerView').classList.remove('hidden');
            updateSavedLessonsList();
        }

        async function generateLesson() {
            const topic = document.getElementById('lessonTopic').value.trim();
            const platform = document.getElementById('lessonPlatform').value;
            const duration = document.getElementById('lessonDuration').value; 
            const btn = document.getElementById('genLessonBtn');
            const contentArea = document.getElementById('lessonContentArea');
            const saveBtn = document.getElementById('saveLessonBtn');

            if (!topic) {
                alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô');
                return;
            }

            const originalBtnText = btn.innerHTML;
            btn.disabled = true;
            btn.innerHTML = `<i data-lucide="loader" class="w-5 h-5 animate-spin"></i> ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ß‡∏µ‡∏î‡∏µ‡πÇ‡∏≠‡πÅ‡∏•‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô...`;
            lucide.createIcons();
            saveBtn.disabled = true;
            
            contentArea.innerHTML = `<div class="space-y-4 animate-pulse"><div class="h-8 bg-slate-200 rounded w-3/4 mx-auto mb-6"></div><div class="h-4 bg-slate-200 rounded w-full"></div><div class="h-4 bg-slate-200 rounded w-full"></div><div class="h-24 bg-amber-50 rounded w-full border border-amber-100 p-4"></div><div class="grid grid-cols-2 gap-4 mt-4"><div class="h-20 bg-red-50 rounded w-full border border-red-100"></div><div class="h-20 bg-red-50 rounded w-full border border-red-100"></div></div></div><div class="text-center text-slate-500 mt-4 text-sm">AI ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏£‡∏≤‡∏Å‡∏®‡∏±‡∏û‡∏ó‡πå‡πÅ‡∏•‡∏∞‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏™‡∏∑‡πà‡∏≠‡∏Å‡∏≤‡∏£‡∏™‡∏≠‡∏ô...</div>`;

            try {
                const prompt = `
                    Act as a Creative Bible Teacher and Scholar.
                    Task: Create a Lesson Plan based on the **Ethiopian Biblical Canon**.
                    Topic: "${topic}"
                    Format: ${platform} (${duration})
                    
                    **Content Requirements:**
                    1. **Title:** Catchy headline.
                    2. **The Hook:** Grab attention.
                    3. **Key Scripture:** Quote 1-2 verses (Thai) from Ethiopian Canon.
                    4. **üîç Word Study:** Select 1-2 terms. Provide root in **Hebrew, Greek, or Aramaic** (NOT Ge'ez). Explain meaning in Thai.
                    5. **Main Teaching:** Content structure.
                    6. **Application:** Practical steps.
                    7. **Prayer:** Closing prayer.
                    8. **üì∫ YouTube Keywords:** Suggest 2 specific search queries to find relevant videos.
                    
                    **Output Format (JSON Only):**
                    {
                        "title": "String",
                        "contentHtml": "HTML string. Use <div class='bg-amber-50 p-4 rounded-lg border border-amber-200 my-4'> for Word Study. Use emojis.",
                        "youtubeQueries": ["Query 1", "Query 2"]
                    }
                `;

                const result = await callGeminiProxy(prompt);
                
                let videoHtml = '';
                if (result.youtubeQueries && result.youtubeQueries.length > 0) {
                    videoHtml = `<div class="mt-8 pt-6 border-t border-slate-200"><h3 class="font-bold text-red-600 mb-3 flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-youtube"><path d="M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17"/><path d="m10 15 5-3-5-3z"/></svg> ‡∏™‡∏∑‡πà‡∏≠‡∏ß‡∏µ‡∏î‡∏µ‡πÇ‡∏≠‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏™‡∏≠‡∏ô (YouTube)</h3><div class="grid sm:grid-cols-2 gap-3">${result.youtubeQueries.map(q => `<a href="https://www.youtube.com/results?search_query=${encodeURIComponent(q)}" target="_blank" class="flex items-center gap-3 p-3 rounded-lg border border-red-100 bg-red-50 hover:bg-red-100 transition-colors group"><div class="w-10 h-10 rounded-full bg-red-200 flex items-center justify-center text-red-600 group-hover:scale-110 transition-transform"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="currentColor" stroke="none"><path d="M10 15l5-3-5-3z"/></svg></div><div><div class="text-xs text-red-500 font-bold uppercase">‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤:</div><div class="text-sm text-slate-700 font-medium line-clamp-1">"${q}"</div></div><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-external-link ml-auto text-red-400"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" y1="14" x2="21" y2="3"/></svg></a>`).join('')}</div></div>`;
                }

                const fullContent = result.contentHtml + videoHtml;
                contentArea.innerHTML = fullContent;
                
                currentGeneratedLesson = {
                    id: Date.now(),
                    topic: topic,
                    platform: platform,
                    title: result.title,
                    content: fullContent,
                    date: new Date().toLocaleDateString('th-TH')
                };
                saveBtn.disabled = false;

            } catch (error) {
                console.error(error);
                contentArea.innerHTML = `<div class="text-red-500 text-center p-4">‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô: ${error.message}</div>`;
            } finally {
                btn.disabled = false;
                btn.innerHTML = originalBtnText;
                lucide.createIcons();
            }
        }

        function saveCurrentLesson() {
            if (!currentGeneratedLesson) return;
            savedLessons.unshift(currentGeneratedLesson);
            localStorage.setItem('ethiopian_lessons', JSON.stringify(savedLessons));
            updateSavedLessonsList();
            const btn = document.getElementById('saveLessonBtn');
            const originalIcon = btn.innerHTML;
            btn.innerHTML = `<i data-lucide="check" class="w-4 h-4 text-green-600"></i>`;
            lucide.createIcons();
            setTimeout(() => { btn.innerHTML = originalIcon; lucide.createIcons(); }, 1500);
        }

        function updateSavedLessonsList() {
            const container = document.getElementById('savedLessonsList');
            if (savedLessons.length === 0) {
                container.innerHTML = '<div class="text-center text-slate-400 text-xs mt-10">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</div>';
                return;
            }
            container.innerHTML = '';
            savedLessons.forEach(lesson => {
                const item = document.createElement('div');
                item.className = "p-3 rounded-lg border border-slate-100 hover:bg-slate-50 cursor-pointer transition-colors group relative";
                item.onclick = () => loadSavedLesson(lesson.id);
                item.innerHTML = `<div class="pr-6"><h4 class="font-bold text-slate-700 text-sm truncate">${lesson.title}</h4><div class="flex items-center gap-2 mt-1"><span class="text-[10px] bg-slate-100 text-slate-500 px-1.5 py-0.5 rounded">${lesson.platform}</span><span class="text-[10px] text-slate-400">${lesson.date}</span></div></div><button onclick="deleteLesson(event, ${lesson.id})" class="absolute top-2 right-2 p-1 text-slate-300 hover:text-red-400 opacity-0 group-hover:opacity-100 transition-opacity"><i data-lucide="trash" class="w-3 h-3"></i></button>`;
                container.appendChild(item);
            });
            lucide.createIcons();
        }

        function loadSavedLesson(id) {
            const lesson = savedLessons.find(l => l.id === id);
            if (lesson) {
                document.getElementById('lessonContentArea').innerHTML = lesson.content;
                currentGeneratedLesson = lesson;
                document.getElementById('saveLessonBtn').disabled = true;
            }
        }

        function deleteLesson(e, id) {
            e.stopPropagation();
            if(confirm('‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ô‡∏µ‡πâ‡πÉ‡∏ä‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?')) {
                savedLessons = savedLessons.filter(l => l.id !== id);
                localStorage.setItem('ethiopian_lessons', JSON.stringify(savedLessons));
                updateSavedLessonsList();
                if(currentGeneratedLesson && currentGeneratedLesson.id === id) {
                    clearLessonView();
                }
            }
        }

        function clearLessonView() {
            document.getElementById('lessonContentArea').innerHTML = `<div class="flex flex-col items-center justify-center h-full text-slate-300"><i data-lucide="layout-template" class="w-16 h-16 mb-4 opacity-50"></i><p>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏î‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</p></div>`;
            currentGeneratedLesson = null;
            document.getElementById('saveLessonBtn').disabled = true;
            lucide.createIcons();
        }
        
        function copyLesson() {
            const content = document.getElementById('lessonContentArea').innerText;
            navigator.clipboard.writeText(content).then(() => { alert('‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡πÅ‡∏•‡πâ‡∏ß'); });
        }


        // --- Verse of the Day ---
        async function loadVerseOfDay() {
            const today = new Date().toDateString();
            const savedVOD = JSON.parse(localStorage.getItem('ethiopian_vod'));

            if (savedVOD && savedVOD.date === today) {
                displayVOD(savedVOD);
            } else {
                try {
                    const prompt = `Select an inspiring Bible verse from the Ethiopian Canon (Enoch, Jubilees, Psalms, etc.). Translate to Thai. Output JSON: {"ref": "Book Chapter:Verse", "text": "Thai Text"}`;
                    const data = await callGeminiProxy(prompt);
                    data.date = today;
                    localStorage.setItem('ethiopian_vod', JSON.stringify(data));
                    displayVOD(data);
                } catch (e) { console.error("VOD Error", e); }
            }
        }

        function displayVOD(vod) {
            document.getElementById('vodText').innerText = `"${vod.text}"`;
            document.getElementById('vodRef').innerText = vod.ref;
        }

        function goToVerseOfDay() {
            const ref = document.getElementById('vodRef').innerText;
            if(ref !== "-") {
                document.getElementById('topicInput').value = ref;
                goToTopicSearch();
                performTopicSearch();
            }
        }

        // --- Settings & UI ---
        function toggleSettings() { document.getElementById('settingsPanel').classList.toggle('hidden'); }
        function changeFontSize(delta) {
            fontSize = Math.max(80, Math.min(200, fontSize + (delta * 10)));
            document.getElementById('fontSizeLabel').innerText = fontSize + '%';
            const textContent = document.getElementById('textContent');
            const summaryContent = document.getElementById('summaryContent');
            if (textContent) { textContent.style.fontSize = (1.125 * fontSize / 100) + 'rem'; textContent.style.lineHeight = '1.8'; }
            if (summaryContent) { summaryContent.style.fontSize = (0.875 * fontSize / 100) + 'rem'; }
        }
        function setTheme(theme) { document.body.className = `h-screen flex flex-col overflow-hidden theme-${theme} font-sarabun`; }

        // --- Bookmarks Logic ---
        function toggleBookmarks() {
            const sidebar = document.getElementById('sidebar');
            if (sidebar.classList.contains('-translate-x-full')) toggleSidebar();
            switchSidebarTab('bookmarks');
        }
        function switchSidebarTab(tabName) {
            const booksView = document.getElementById('sidebarBooksView');
            const bookmarksView = document.getElementById('sidebarBookmarksView');
            const tabBooks = document.getElementById('tabBooks');
            const tabBookmarks = document.getElementById('tabBookmarks');
            if (tabName === 'books') {
                booksView.classList.remove('hidden'); booksView.classList.add('flex');
                bookmarksView.classList.add('hidden'); bookmarksView.classList.remove('flex');
                tabBooks.className = "flex-1 py-3 text-center text-sm font-bold border-b-2 border-amber-500 text-amber-600 bg-slate-50";
                tabBookmarks.className = "flex-1 py-3 text-center text-sm font-bold text-slate-500 hover:text-slate-700";
            } else {
                booksView.classList.add('hidden'); booksView.classList.remove('flex');
                bookmarksView.classList.remove('hidden'); bookmarksView.classList.add('flex');
                tabBookmarks.className = "flex-1 py-3 text-center text-sm font-bold border-b-2 border-amber-500 text-amber-600 bg-slate-50";
                tabBooks.className = "flex-1 py-3 text-center text-sm font-bold text-slate-500 hover:text-slate-700";
                updateBookmarksList();
            }
        }
        function saveBookmark() {
            if (!currentBook) return;
            const newBookmark = { bookEn: currentBook.en, bookTh: currentBook.th, chapter: currentChapter, timestamp: new Date().getTime() };
            bookmarks = bookmarks.filter(b => !(b.bookEn === newBookmark.bookEn && b.chapter === newBookmark.chapter));
            bookmarks.unshift(newBookmark);
            localStorage.setItem('ethiopian_bookmarks', JSON.stringify(bookmarks));
            const btn = document.getElementById('saveBookmarkBtn');
            const originalIcon = btn.innerHTML;
            btn.innerHTML = `<i data-lucide="check" class="w-6 h-6 text-green-500"></i>`;
            setTimeout(() => { btn.innerHTML = originalIcon; lucide.createIcons(); }, 1500);
            updateBookmarksList();
        }
        
        // FIXED: Use DOM elements to avoid onclick string interpolation issues
        function updateBookmarksList() {
            const container = document.getElementById('bookmarksContainer');
            container.innerHTML = ''; // Clear previous
            
            if (bookmarks.length === 0) {
                container.innerHTML = '<div class="text-center p-8 text-slate-400 text-sm">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ó‡∏µ‡πà‡∏Ñ‡∏±‡πà‡∏ô‡∏´‡∏ô‡πâ‡∏≤</div>';
                return;
            }
            
            bookmarks.forEach(bm => {
                const item = document.createElement('div');
                item.className = "bg-white p-3 rounded-lg border border-slate-100 shadow-sm cursor-pointer hover:bg-amber-50 group flex justify-between items-center transition-all";
                
                // Content part (Click to open)
                const contentDiv = document.createElement('div');
                contentDiv.className = "flex-1";
                contentDiv.onclick = function() { openBookmark(bm.bookEn, bm.chapter); };
                contentDiv.innerHTML = `
                    <div class="font-bold text-slate-700 text-sm">${bm.bookTh}</div>
                    <div class="text-xs text-slate-500">‡∏ö‡∏ó‡∏ó‡∏µ‡πà ${bm.chapter}</div>
                `;
                
                // Delete button
                const delBtn = document.createElement('button');
                delBtn.className = "text-slate-300 hover:text-red-400 p-1";
                delBtn.innerHTML = `<i data-lucide="trash-2" class="w-4 h-4"></i>`;
                delBtn.onclick = function(e) {
                    e.stopPropagation(); // Prevent triggering openBookmark
                    removeBookmark(bm.timestamp);
                };

                item.appendChild(contentDiv);
                item.appendChild(delBtn);
                container.appendChild(item);
            });
            lucide.createIcons();
        }

        function openBookmark(bookEn, chapter) { openChapterFromSearch(bookEn, chapter); if(window.innerWidth < 768) toggleSidebar(); }
        function removeBookmark(timestamp) { bookmarks = bookmarks.filter(b => b.timestamp !== timestamp); localStorage.setItem('ethiopian_bookmarks', JSON.stringify(bookmarks)); updateBookmarksList(); }

        // --- General Navigation ---
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('sidebarOverlay');
            sidebar.classList.toggle('-translate-x-full');
            overlay.classList.toggle('hidden');
        }
        function hideAllViews() {
            ['welcomeScreen','chapterSelectionView','readingView','topicSearchView','lessonPlannerView'].forEach(id => document.getElementById(id).classList.add('hidden'));
        }
        function goHome() { hideAllViews(); document.getElementById('welcomeScreen').classList.remove('hidden'); }
        function goToTopicSearch() { hideAllViews(); document.getElementById('topicSearchView').classList.remove('hidden'); document.getElementById('topicInput').focus(); }
        function renderSidebar() {
            const container = document.getElementById('bookListContainer');
            container.innerHTML = '';
            ethiopianCanon.forEach(cat => {
                const catHeader = document.createElement('div');
                catHeader.className = "px-3 py-2 mt-2 text-xs font-bold text-slate-400 uppercase tracking-wider font-sarabun";
                catHeader.innerText = cat.category;
                container.appendChild(catHeader);
                cat.books.forEach(book => {
                    const btn = document.createElement('button');
                    btn.className = "book-card w-full text-left px-4 py-3 mb-1 rounded-lg text-sm text-slate-700 hover:bg-amber-50 hover:text-amber-800 flex justify-between items-center group font-sarabun";
                    btn.onclick = () => selectBook(book);
                    let badge = "";
                    if(book.tag === "Ethiopian Only") badge = `<span class="text-[10px] bg-indigo-100 text-indigo-700 px-1.5 py-0.5 rounded border border-indigo-200">Exclusive</span>`;
                    else if(book.tag === "Deuterocanon") badge = `<span class="text-[10px] bg-orange-100 text-orange-700 px-1.5 py-0.5 rounded border border-orange-200">Deuterocanon</span>`;
                    btn.innerHTML = `<span class="font-medium">${book.th}</span>${badge}`;
                    container.appendChild(btn);
                });
            });
        }

        function selectBook(book) {
            currentBook = book;
            hideAllViews();
            document.getElementById('chapterSelectionView').classList.remove('hidden');
            document.getElementById('gridBookTitle').innerText = book.th;
            document.getElementById('gridBookCategory').innerText = book.en;
            if(window.innerWidth < 768) { const sidebar = document.getElementById('sidebar'); if (!sidebar.classList.contains('-translate-x-full')) toggleSidebar(); }
            renderChapterGrid(book);
        }

        function renderChapterGrid(book) {
            const grid = document.getElementById('chapterGrid');
            grid.innerHTML = '';
            for(let i=1; i<=book.ch; i++) {
                const btn = document.createElement('button');
                btn.className = "chapter-btn bg-white border border-slate-200 rounded-lg p-3 text-sm font-semibold text-slate-600 shadow-sm flex items-center justify-center h-12 w-full font-sarabun";
                btn.innerText = i;
                btn.onclick = () => loadChapter(i);
                grid.appendChild(btn);
            }
        }

        function loadChapter(chapNum) {
            currentChapter = chapNum;
            hideAllViews();
            document.getElementById('readingView').classList.remove('hidden');
            document.getElementById('bookTitleDisplay').innerText = currentBook.th;
            document.getElementById('bookCategoryLabel').innerText = currentBook.en;
            document.getElementById('currentChapterNum').innerText = currentChapter;
            fetchContent();
        }
        function backToChapters() { if(currentBook) selectBook(currentBook); }
        function changeChapter(delta) {
            if (!currentBook) return;
            const newChap = currentChapter + delta;
            if (newChap < 1 || newChap > currentBook.ch) return;
            currentChapter = newChap;
            document.getElementById('currentChapterNum').innerText = currentChapter;
            fetchContent();
        }

        // --- GEMINI API INTEGRATION with LOCAL STORAGE CACHE ---
        async function fetchContent() {
            const contentDiv = document.getElementById('textContent');
            const summaryDiv = document.getElementById('summaryContent');
            const prevBtn = document.getElementById('prevChapBtn');
            const nextBtn = document.getElementById('nextChapBtn');
            prevBtn.disabled = currentChapter <= 1;
            nextBtn.disabled = currentChapter >= currentBook.ch;

            // Cache Keys
            const transKey = `eth_trans_${currentBook.en}_${currentChapter}`;
            const summKey = `eth_summ_${currentBook.en}_${currentChapter}`;

            const cachedTrans = localStorage.getItem(transKey);
            const cachedSumm = localStorage.getItem(summKey);

            // Use Cache if available
            if (cachedTrans && cachedSumm) {
                contentDiv.innerHTML = cachedTrans;
                summaryDiv.innerHTML = cachedSumm;
                return;
            }
            
            // Show Loading only if not cached
            if (!cachedTrans) contentDiv.innerHTML = `<div class="space-y-6 p-4 animate-pulse"><div class="h-4 bg-slate-200 rounded w-full"></div><div class="h-4 bg-slate-200 rounded w-11/12"></div></div><div class="text-center text-slate-400 text-sm mt-2 italic">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏£‡πà‡∏á‡πÅ‡∏õ‡∏•‡∏†‡∏≤‡∏©‡∏≤...</div>`;
            if (!cachedSumm) summaryDiv.innerHTML = `<div class="space-y-4 p-4 animate-pulse"><div class="h-3 bg-indigo-200 rounded w-3/4"></div><div class="h-3 bg-indigo-200 rounded w-full"></div></div><div class="text-center text-indigo-300 text-xs mt-2 italic">‡∏ô‡∏±‡∏Å‡∏ß‡∏¥‡∏ä‡∏≤‡∏Å‡∏≤‡∏£‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Ñ‡πâ‡∏ô‡∏Ñ‡∏ß‡πâ‡∏≤...</div>`;

            const transPrompt = `Role: Expert Bible Translator (Thai). Task: Translate "${currentBook.en}" (Ethiopian Canon) Chapter ${currentChapter} into formal, literary Thai. Use HTML <p>. Format verses: <span class="verse-num">1</span> Text... Use Arabic numerals only. Output JSON: { "html": "raw html" }`;
            const analysisPrompt = `Role: Professor of Ethiopian Biblical Studies. Task: Sidebar commentary for "${currentBook.en}" Chapter ${currentChapter} in Thai. HTML format (div/ul/li). Emojis: üîë, üìú, üèõÔ∏è, üî§, üîó. Include Ancient Vocabulary. Output JSON: { "html": "raw html" }`;

            // Fetch Translation
            if (!cachedTrans) {
                try {
                    const transData = await callGeminiProxy(transPrompt);
                    const html = transData.html || transData.translation;
                    contentDiv.innerHTML = html;
                    try { localStorage.setItem(transKey, html); } catch(e) { console.log('Cache full'); }
                } catch (e) { contentDiv.innerHTML = `<div class="text-red-500 p-4">Error: ${e.message}</div>`; }
            } else {
                contentDiv.innerHTML = cachedTrans;
            }

            // Fetch Analysis
            if (!cachedSumm) {
                try {
                    const analData = await callGeminiProxy(analysisPrompt);
                    const html = analData.html || analData.summary;
                    summaryDiv.innerHTML = html;
                    try { localStorage.setItem(summKey, html); } catch(e) { console.log('Cache full'); }
                } catch (e) { summaryDiv.innerHTML = `<div class="text-red-400 text-xs">Error</div>`; }
            } else {
                summaryDiv.innerHTML = cachedSumm;
            }
        }

        async function performTopicSearch() {
            const input = document.getElementById('topicInput');
            const resultsDiv = document.getElementById('searchResults');
            const query = input.value.trim();
            if (!query) return;

            const ph = document.getElementById('searchPlaceholder');
            if(ph) ph.classList.add('hidden');
            resultsDiv.innerHTML = `<div class="space-y-4 animate-pulse"><div class="h-24 bg-slate-200 rounded-xl"></div></div><div class="text-center text-slate-500 mt-4">AI ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...</div>`;

            const prompt = `Act as expert. Topic: "${query}". Find 5-7 verses (Ethiopian Canon). JSON Array: [{"book_en": "English", "book_th": "Thai", "chapter_num": 1, "verse_num": 1, "text": "Thai", "context": "Context"}]`;
            try {
                const data = await callGeminiProxy(prompt);
                renderSearchResults(data, query);
            } catch (e) {
                resultsDiv.innerHTML = `<div class="text-center text-red-500 p-8">Error: ${e.message}</div>`;
            }
        }

        function renderSearchResults(results, query) {
            const container = document.getElementById('searchResults');
            container.innerHTML = `<h3 class="text-lg font-bold text-slate-700 mb-4">‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö: <span class="text-amber-600">"${query}"</span></h3>`;
            if(results.length === 0) { container.innerHTML += `<div class="text-slate-500 italic">‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏û‡∏£‡∏∞‡∏Ñ‡∏±‡∏°‡∏†‡∏µ‡∏£‡πå‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ô</div>`; return; }
            results.forEach(item => {
                const card = document.createElement('div');
                card.className = "bg-white p-5 rounded-xl border border-slate-200 shadow-sm hover:shadow-md transition-shadow";
                const safeBookEn = item.book_en ? item.book_en.replace(/'/g, "\\'") : '';
                const safeChapter = item.chapter_num || 1;
                card.innerHTML = `
                    <div class="flex justify-between items-start mb-2">
                        <span class="font-bold text-indigo-700 text-lg">${item.book_th} ${item.chapter_num}:${item.verse_num}</span>
                        <button onclick="openChapterFromSearch('${safeBookEn}', ${safeChapter})" class="flex items-center gap-1 text-xs bg-indigo-50 text-indigo-600 hover:bg-indigo-100 px-3 py-1.5 rounded-full border border-indigo-200 transition-colors font-bold"><i data-lucide="book-open" class="w-3 h-3"></i> üìñ ‡∏≠‡πà‡∏≤‡∏ô‡πÄ‡∏ï‡πá‡∏°‡∏ö‡∏ó</button>
                    </div>
                    <p class="text-slate-800 text-lg leading-relaxed mb-3">"${item.text}"</p>
                    <div class="text-xs text-slate-500 bg-slate-50 p-2 rounded border border-slate-100"><span class="font-semibold text-amber-600">‡∏ö‡∏£‡∏¥‡∏ö‡∏ó:</span> ${item.context}</div>
                `;
                container.appendChild(card);
            });
            lucide.createIcons();
        }
        
        function openChapterFromSearch(bookEnName, chapterNum) {
            // Strict comparison first, then fallback to partial match
            let foundBook = null;
            
            // 1. Try Exact Match
            for (const cat of ethiopianCanon) {
                const book = cat.books.find(b => b.en.toLowerCase() === bookEnName.toLowerCase());
                if (book) { foundBook = book; break; }
            }
            
            // 2. Try Partial Match if not found
            if (!foundBook) {
                for (const cat of ethiopianCanon) {
                    const book = cat.books.find(b => b.en.toLowerCase().includes(bookEnName.toLowerCase()));
                    if (book) { foundBook = book; break; }
                }
            }

            if (foundBook) {
                selectBook(foundBook);
                loadChapter(chapterNum);
            } else { alert(`‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠: ${bookEnName}`); }
        }

        document.getElementById('bookSearch').addEventListener('input', (e) => {
            const term = e.target.value.toLowerCase();
            document.querySelectorAll('.book-card').forEach(btn => {
                btn.style.display = btn.innerText.toLowerCase().includes(term) ? 'flex' : 'none';
            });
        });
    </script>
</body>
</html>